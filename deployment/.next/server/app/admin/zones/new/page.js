(()=>{var e={};e.id=4863,e.ids=[4863],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5957:(e,r,t)=>{"use strict";t.d(r,{By:()=>u,a5:()=>p,yn:()=>i,Bx:()=>c,MT:()=>l,AQ:()=>d,gd:()=>f});var a=t(91199);t(42087);var s=t(14605);function n(){let e="https://abrnvjqwpdkodgrtezeg.supabase.co",r=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!r)throw Error("Missing Supabase admin credentials");return(0,s.UU)(e,r)}var o=t(7944);async function i(){let e=n(),{data:r,error:t}=await e.from("pallet_zones").select("*").eq("zone_type","delivery").order("name");if(t)throw Error(t.message);return r}async function d(){let e=n(),{data:r,error:t}=await e.from("pallet_zones").select("*").eq("zone_type","pickup").order("name");if(t)throw Error(t.message);return r}async function l(){let e=n(),{data:r,error:t}=await e.from("pallet_zones").select("*").order("name");if(t)throw Error(t.message);return r}async function c(e){let r=n(),{data:t,error:a}=await r.from("pallet_zones").select("*").eq("id",e).single();if(a)throw Error(a.message);return t}async function u(e){let r=n(),{data:t,error:a}=await r.from("pallet_zones").insert(e).select().single();if(a)throw Error(a.message);return(0,o.revalidatePath)("/admin/zones"),t}async function f(e,r){let t=n(),{data:a,error:s}=await t.from("pallet_zones").update(r).eq("id",e).select().single();if(s)throw Error(s.message);return(0,o.revalidatePath)("/admin/zones"),(0,o.revalidatePath)(`/admin/zones/${e}`),a}async function p(e){let r=n(),{data:t,error:a}=await r.from("producers").select("id, name").eq("pickup_zone_id",e).limit(5);if(a)throw Error(`Failed to check producer usage: ${a.message}`);if(t&&t.length>0){let e=t.map(e=>`"${e.name}" (${e.id.substring(0,8)}...)`).join(", ");throw Error(`Cannot delete zone: This zone is currently used by ${t.length} producer(s): ${e}. You must first reassign these producers to different zones before deleting this zone.`)}let{data:s,error:i}=await r.from("order_reservations").select("id, status, created_at").or(`pickup_zone_id.eq.${e},delivery_zone_id.eq.${e}`).limit(5);if(i)throw Error(`Failed to check zone usage: ${i.message}`);if(s&&s.length>0){let e=s.map(e=>`Reservation ${e.id.substring(0,8)}... (${e.status}, created ${new Date(e.created_at).toLocaleDateString()})`).join(", ");throw Error(`Cannot delete zone: This zone is currently used in ${s.length} existing reservation(s): ${e}. You must first reassign or cancel these reservations before deleting the zone.`)}let{data:d,error:l}=await r.from("pallets").select("id, name").or(`pickup_zone_id.eq.${e},delivery_zone_id.eq.${e}`).limit(5);if(l)throw Error(`Failed to check pallet usage: ${l.message}`);if(d&&d.length>0){let e=d.map(e=>`"${e.name}" (${e.id.substring(0,8)}...)`).join(", ");throw Error(`Cannot delete zone: This zone is currently used in ${d.length} existing pallet(s): ${e}. You must first remove or reassign these pallets before deleting the zone.`)}let{error:c}=await r.from("pallet_zones").delete().eq("id",e);if(c)throw Error(c.message);(0,o.revalidatePath)("/admin/zones")}(0,t(33331).D)([i,d,l,c,u,f,p]),(0,a.A)(i,"000e63333e77ec660d6d2d6ca150c337f91a6b8c32",null),(0,a.A)(d,"00251355d62698800fe85cf33b4e8cfe6639d5e0fb",null),(0,a.A)(l,"006c03375aaa39f2cd2086349cb8f87fcc5226db80",null),(0,a.A)(c,"407e35c5facea15df629efd07347f872bacfe07eab",null),(0,a.A)(u,"40a444c12121f7044740951b7079ed317801357a48",null),(0,a.A)(f,"6031f27b758a14bb4f1c3504410a6f98776f2a9fb8",null),(0,a.A)(p,"40bb6eb08a22875d7b617bd683be7bb3c9b6ccfebc",null)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},15390:(e,r,t)=>{Promise.resolve().then(t.bind(t,36852))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},49637:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"000e63333e77ec660d6d2d6ca150c337f91a6b8c32":()=>n.yn,"00251355d62698800fe85cf33b4e8cfe6639d5e0fb":()=>n.AQ,"002b4f93fdecce38ab41447362701e3bd7280469ab":()=>s.h,"00643ce809e6ce20ef66f5929e0946f9a0888cb71e":()=>a.Xl,"006c03375aaa39f2cd2086349cb8f87fcc5226db80":()=>n.MT,"006ce0741515c18fd40bece93393d603e10d5a23d5":()=>a.EM,"402eefbf27465ab7a9e2720f0501458518d9ba2628":()=>a.B5,"404ce88c125f79e5b61af93c3739bd192b253aa6f7":()=>a.fk,"407e35c5facea15df629efd07347f872bacfe07eab":()=>n.Bx,"40a444c12121f7044740951b7079ed317801357a48":()=>n.By,"40bb6eb08a22875d7b617bd683be7bb3c9b6ccfebc":()=>n.a5,"6031f27b758a14bb4f1c3504410a6f98776f2a9fb8":()=>n.gd});var a=t(45063),s=t(23234),n=t(5957)},55511:e=>{"use strict";e.exports=require("crypto")},55558:(e,r,t)=>{Promise.resolve().then(t.bind(t,93751))},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},93968:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(37413),s=t(36852);function n(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Add Zone"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create a new delivery zone"})]}),(0,a.jsx)(s.default,{})]})}},96499:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>l});var a=t(65239),s=t(48088),n=t(88170),o=t.n(n),i=t(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let l={children:["",{children:["admin",{children:["zones",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93968)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/admin/zones/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,42548)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,90253))).default(e)],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,52608)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,82366)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,90253))).default(e)],twitter:[],manifest:void 0}}]}.children,c=["/Users/axelsamuelson/Downloads/crowdvine_01/app/admin/zones/new/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/zones/new/page",pathname:"/admin/zones/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},99897:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"003782174d8a3d55037297099e3a362cb75f58328c":()=>a.$$RSC_SERVER_ACTION_0,"007576a7507c003d41ccbb09c6db34287f05775842":()=>s.CI,"60e23ebd701beaf98fa7a72caaec9d44d01e5ad1f4":()=>s.bN,"60efcc50e52f4883661f2378341594fcdbc0bab423":()=>s.bm});var a=t(42548),s=t(18092)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[4447,3008,4999,4386,8167,6355,8013,5258,7498,2802],()=>t(96499));module.exports=a})();