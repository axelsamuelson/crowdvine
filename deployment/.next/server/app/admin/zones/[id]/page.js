(()=>{var e={};e.id=1380,e.ids=[1268,1380],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7499:(e,r,t)=>{Promise.resolve().then(t.bind(t,84648)),Promise.resolve().then(t.bind(t,36852))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11268:(e,r,t)=>{"use strict";t.d(r,{getSupabaseAdmin:()=>s});var a=t(83008);function s(){let e="https://abrnvjqwpdkodgrtezeg.supabase.co",r=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!r)throw Error("Missing Supabase admin credentials");return(0,a.UU)(e,r)}},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27743:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>l});var a=t(65239),s=t(48088),n=t(88170),i=t.n(n),o=t(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let l={children:["",{children:["admin",{children:["zones",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,95935)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/admin/zones/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,42548)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,90253))).default(e)],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,52608)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,82366)),"/Users/axelsamuelson/Downloads/crowdvine_01/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,90253))).default(e)],twitter:[],manifest:void 0}}]}.children,c=["/Users/axelsamuelson/Downloads/crowdvine_01/app/admin/zones/[id]/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/zones/[id]/page",pathname:"/admin/zones/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},53251:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"002b4f93fdecce38ab41447362701e3bd7280469ab":()=>s.h,"00643ce809e6ce20ef66f5929e0946f9a0888cb71e":()=>a.Xl,"006ce0741515c18fd40bece93393d603e10d5a23d5":()=>a.EM,"402eefbf27465ab7a9e2720f0501458518d9ba2628":()=>a.B5,"404ce88c125f79e5b61af93c3739bd192b253aa6f7":()=>a.fk});var a=t(45063),s=t(23234)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},74359:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"000e63333e77ec660d6d2d6ca150c337f91a6b8c32":()=>n.yn,"00251355d62698800fe85cf33b4e8cfe6639d5e0fb":()=>n.AQ,"003782174d8a3d55037297099e3a362cb75f58328c":()=>a.$$RSC_SERVER_ACTION_0,"006c03375aaa39f2cd2086349cb8f87fcc5226db80":()=>n.MT,"007576a7507c003d41ccbb09c6db34287f05775842":()=>s.CI,"407e35c5facea15df629efd07347f872bacfe07eab":()=>n.Bx,"40a444c12121f7044740951b7079ed317801357a48":()=>n.By,"40bb6eb08a22875d7b617bd683be7bb3c9b6ccfebc":()=>n.a5,"6031f27b758a14bb4f1c3504410a6f98776f2a9fb8":()=>n.gd,"60e23ebd701beaf98fa7a72caaec9d44d01e5ad1f4":()=>s.bN,"60efcc50e52f4883661f2378341594fcdbc0bab423":()=>s.bm});var a=t(42548),s=t(18092),n=t(85017)},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83523:(e,r,t)=>{Promise.resolve().then(t.bind(t,82532)),Promise.resolve().then(t.bind(t,93751))},85017:(e,r,t)=>{"use strict";t.d(r,{AQ:()=>o,Bx:()=>l,By:()=>c,MT:()=>d,a5:()=>f,gd:()=>u,yn:()=>i});var a=t(67218);t(79130);var s=t(11268),n=t(62351);async function i(){let e=(0,s.getSupabaseAdmin)(),{data:r,error:t}=await e.from("pallet_zones").select("*").eq("zone_type","delivery").order("name");if(t)throw Error(t.message);return r}async function o(){let e=(0,s.getSupabaseAdmin)(),{data:r,error:t}=await e.from("pallet_zones").select("*").eq("zone_type","pickup").order("name");if(t)throw Error(t.message);return r}async function d(){let e=(0,s.getSupabaseAdmin)(),{data:r,error:t}=await e.from("pallet_zones").select("*").order("name");if(t)throw Error(t.message);return r}async function l(e){let r=(0,s.getSupabaseAdmin)(),{data:t,error:a}=await r.from("pallet_zones").select("*").eq("id",e).single();if(a)throw Error(a.message);return t}async function c(e){let r=(0,s.getSupabaseAdmin)(),{data:t,error:a}=await r.from("pallet_zones").insert(e).select().single();if(a)throw Error(a.message);return(0,n.revalidatePath)("/admin/zones"),t}async function u(e,r){let t=(0,s.getSupabaseAdmin)(),{data:a,error:i}=await t.from("pallet_zones").update(r).eq("id",e).select().single();if(i)throw Error(i.message);return(0,n.revalidatePath)("/admin/zones"),(0,n.revalidatePath)(`/admin/zones/${e}`),a}async function f(e){let r=(0,s.getSupabaseAdmin)(),{data:t,error:a}=await r.from("producers").select("id, name").eq("pickup_zone_id",e).limit(5);if(a)throw Error(`Failed to check producer usage: ${a.message}`);if(t&&t.length>0){let e=t.map(e=>`"${e.name}" (${e.id.substring(0,8)}...)`).join(", ");throw Error(`Cannot delete zone: This zone is currently used by ${t.length} producer(s): ${e}. You must first reassign these producers to different zones before deleting this zone.`)}let{data:i,error:o}=await r.from("order_reservations").select("id, status, created_at").or(`pickup_zone_id.eq.${e},delivery_zone_id.eq.${e}`).limit(5);if(o)throw Error(`Failed to check zone usage: ${o.message}`);if(i&&i.length>0){let e=i.map(e=>`Reservation ${e.id.substring(0,8)}... (${e.status}, created ${new Date(e.created_at).toLocaleDateString()})`).join(", ");throw Error(`Cannot delete zone: This zone is currently used in ${i.length} existing reservation(s): ${e}. You must first reassign or cancel these reservations before deleting the zone.`)}let{data:d,error:l}=await r.from("pallets").select("id, name").or(`pickup_zone_id.eq.${e},delivery_zone_id.eq.${e}`).limit(5);if(l)throw Error(`Failed to check pallet usage: ${l.message}`);if(d&&d.length>0){let e=d.map(e=>`"${e.name}" (${e.id.substring(0,8)}...)`).join(", ");throw Error(`Cannot delete zone: This zone is currently used in ${d.length} existing pallet(s): ${e}. You must first remove or reassign these pallets before deleting the zone.`)}let{error:c}=await r.from("pallet_zones").delete().eq("id",e);if(c)throw Error(c.message);(0,n.revalidatePath)("/admin/zones")}(0,t(17478).D)([i,o,d,l,c,u,f]),(0,a.A)(i,"000e63333e77ec660d6d2d6ca150c337f91a6b8c32",null),(0,a.A)(o,"00251355d62698800fe85cf33b4e8cfe6639d5e0fb",null),(0,a.A)(d,"006c03375aaa39f2cd2086349cb8f87fcc5226db80",null),(0,a.A)(l,"407e35c5facea15df629efd07347f872bacfe07eab",null),(0,a.A)(c,"40a444c12121f7044740951b7079ed317801357a48",null),(0,a.A)(u,"6031f27b758a14bb4f1c3504410a6f98776f2a9fb8",null),(0,a.A)(f,"40bb6eb08a22875d7b617bd683be7bb3c9b6ccfebc",null)},95935:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(37413),s=t(85017),n=t(36852),i=t(84648),o=t(39916);async function d({params:e}){try{let{id:r}=await e,t=await (0,s.Bx)(r);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Zone"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Update zone configuration"})]}),(0,a.jsx)(i.DeleteZoneButton,{zoneId:t.id,zoneName:t.name})]}),(0,a.jsx)(n.default,{zone:t})]})}catch(e){(0,o.notFound)()}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[4447,3008,4999,4386,8167,6355,8013,1410,5448,2351,5258,7498,2802,4619],()=>t(27743));module.exports=a})();