exports.id=5258,exports.ids=[5258],exports.modules={653:(e,t,r)=>{"use strict";r.d(t,{DebugGrid:()=>o});var a=r(60687),s=r(43210),n=r(96241);function o({className:e}){let[t,r]=(0,s.useState)("hidden");return"hidden"===t?null:(0,a.jsx)("div",{className:(0,n.cn)("fixed inset-0 pointer-events-none z-50","padded"===t?"px-sides":"","base-grid",e),children:Array.from({length:12}).map((e,t)=>(0,a.jsx)("div",{className:"h-full bg-[tomato] opacity-20"},t))})}},2586:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(60687),s=r(24934);function n({reset:e}){return(0,a.jsxs)("div",{className:"mx-auto mb-4 mt-top-spacing flex max-w-xl flex-col rounded-lg border border-border bg-white p-8 md:p-12",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Oh no!"}),(0,a.jsx)("p",{className:"my-2",children:"There was an issue with our storefront. This could be a temporary issue, please try your action again."}),(0,a.jsx)(s.$,{size:"lg",className:"mt-4",onClick:()=>e(),children:"Try Again"})]})}},2923:(e,t,r)=>{"use strict";r.d(t,{V0Provider:()=>s});var a=r(12907);let s=(0,a.registerClientReference)(function(){throw Error("Attempted to call V0Provider() from the server but V0Provider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/lib/context.tsx","V0Provider");(0,a.registerClientReference)(function(){throw Error("Attempted to call useIsV0() from the server but useIsV0 is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/lib/context.tsx","useIsV0")},7593:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var a=r(74208),s=r(32796);async function n(){let e=await (0,a.UL)(),t="https://abrnvjqwpdkodgrtezeg.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFicm52anF3cGRrb2RncnRlemVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzQwNjMsImV4cCI6MjA3MjI1MDA2M30.I_i63rAdVM51CKwic2GhNY5z7WKzA8p8OdVVh8-YiGs";if(!t||!r)throw console.error("Missing Supabase environment variables:"),console.error("NEXT_PUBLIC_SUPABASE_URL:",t?"SET":"MISSING"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",r?"SET":"MISSING"),Error("Supabase environment variables are not configured. Please check your .env.local file.");return(0,s.createServerClient)(t,r,{cookies:{get:t=>e.get(t)?.value,set(e,t,r){console.log(`Cookie ${e} would be set to ${t}`)},remove(e,t){console.log(`Cookie ${e} would be removed`)}}})}},9374:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>m,_:()=>h});var a=r(60687),s=r(43210),n=r(6475);n.callServer,n.findSourceMapURL;let o=(0,n.createServerReference)("404ce88c125f79e5b61af93c3739bd192b253aa6f7",n.callServer,void 0,n.findSourceMapURL,"updateItem");var i=r(60358);let l=(0,s.createContext)(void 0);function c(e,t){return(Number(t)*e).toString()}function d(e){let t=e.reduce((e,t)=>e+t.quantity,0),r=e.reduce((e,t)=>e+Number(t.cost.totalAmount.amount),0),a=e[0]?.cost.totalAmount.currencyCode??"USD";return{totalQuantity:t,cost:{subtotalAmount:{amount:r.toString(),currencyCode:a},totalAmount:{amount:r.toString(),currencyCode:a},totalTaxAmount:{amount:"0",currencyCode:a}}}}function u(e,t){let r=e||{id:"",checkoutUrl:"",cost:{subtotalAmount:{amount:"0",currencyCode:"USD"},totalAmount:{amount:"0",currencyCode:"USD"},totalTaxAmount:{amount:"0",currencyCode:"USD"}},totalQuantity:0,lines:[]};switch(t.type){case"UPDATE_ITEM":{let{merchandiseId:e,nextQuantity:a}=t.payload,s=r.lines.map(t=>{if(t.merchandise.id!==e)return t;if(a<=0)return null;let r=c(a,(Number(t.cost.totalAmount.amount)/t.quantity).toString());return{...t,quantity:a,cost:{...t.cost,totalAmount:{...t.cost.totalAmount,amount:r}}}}).filter(Boolean);if(0===s.length)return{...r,lines:[],totalQuantity:0,cost:{...r.cost,totalAmount:{...r.cost.totalAmount,amount:"0"}}};return{...r,...d(s),lines:s}}case"ADD_ITEM":{let{variant:e,product:a,previousQuantity:s}=t.payload,n=r.lines.find(t=>t.merchandise.id===e.id),o=s+1,i=n?r.lines.map(t=>{if(t.merchandise.id!==e.id)return t;let r=c(o,(Number(t.cost.totalAmount.amount)/t.quantity).toString());return{...t,quantity:o,cost:{...t.cost,totalAmount:{...t.cost.totalAmount,amount:r}}}}):[{id:`temp-${Date.now()}`,quantity:o,cost:{totalAmount:{amount:c(o,e.price.amount),currencyCode:e.price.currencyCode}},merchandise:{id:e.id,title:e.title,selectedOptions:e.selectedOptions,product:a}},...r.lines];return{...r,...d(i),lines:i}}default:return r}}function m({children:e}){let[t,r]=(0,s.useTransition)(),[n,c]=(0,s.useState)(void 0),[d,m]=(0,s.useOptimistic)(n,u),h=(0,s.useCallback)(async(e,t,a)=>{r(()=>{m({type:"UPDATE_ITEM",payload:{merchandiseId:t,nextQuantity:a}})});let s=await o({lineId:e,quantity:a});s&&c(s)},[m]),f=(0,s.useCallback)(async(e,t)=>{let a=d?.lines.find(t=>t.merchandise.id===e.id)?.quantity||0;r(()=>{m({type:"ADD_ITEM",payload:{variant:e,product:t,previousQuantity:a}})});let s=await i.B(e.id);s?c(s):c(n)},[m,d,n]),p=(0,s.useMemo)(()=>({cart:d,addItem:f,updateItem:h,isPending:t}),[d,f,h,t]);return(0,a.jsx)(l.Provider,{value:p,children:e})}function h(){let e=(0,s.useContext)(l);if(void 0===e)throw console.warn("useCart called during SSR - this should not happen"),Error("useCart must be used within a CartProvider");return e}},18098:(e,t,r)=>{"use strict";r.d(t,{FooterLogoSvg:()=>i,q:()=>o});var a=r(60687),s=r(43210);let n=!1;function o(){n=!1,window.dispatchEvent(new CustomEvent("footerLogoCacheCleared"))}function i({className:e}){let[t,r]=(0,s.useState)(null),[o,i]=(0,s.useState)(!0),[l,c]=(0,s.useState)(0);return o?(0,a.jsx)("div",{className:e,style:{backgroundColor:"transparent",minHeight:"60px"}}):t?(0,a.jsx)("img",{src:t,alt:"Footer Logo",className:e,style:{objectFit:"contain"},loading:"eager",fetchPriority:"high",onLoad:()=>{n||(new Image().src=t,n=!0)}}):(0,a.jsxs)("svg",{className:e,viewBox:"0 0 200 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{width:"200",height:"60",fill:"currentColor",opacity:"0.1"}),(0,a.jsx)("text",{x:"100",y:"35",textAnchor:"middle",fill:"currentColor",fontSize:"16",fontWeight:"bold",children:"Footer Logo"})]})}},18736:(e,t,r)=>{Promise.resolve().then(r.bind(r,91436)),Promise.resolve().then(r.bind(r,53091)),Promise.resolve().then(r.bind(r,67274)),Promise.resolve().then(r.bind(r,67998)),Promise.resolve().then(r.bind(r,19639)),Promise.resolve().then(r.bind(r,2923)),Promise.resolve().then(r.t.bind(r,38922,23)),Promise.resolve().then(r.t.bind(r,95047,23)),Promise.resolve().then(r.bind(r,75592)),Promise.resolve().then(r.bind(r,6931))},19361:(e,t,r)=>{"use strict";r.d(t,{E6:()=>s,hs:()=>n,tY:()=>a});let a=[{label:"37\xb047'33.4\"N 122\xb024'18.6\"W",href:"https://maps.app.goo.gl/MnpbPDEHxoDydc9M9"},{label:"(269) 682-1402",href:"https://joyco.studio/showcase"},{label:"Instagram",href:"https://www.instagram.com/joyco.studio/"}],s="Default Title",n={red:"#ef4444",blue:"#3b82f6",green:"#22c55e",yellow:"#eab308",orange:"#f97316",purple:"#a855f7",pink:"#ec4899",black:"#000000",white:"#ffffff",gray:"#6b7280",grey:"#6b7280",brown:"#92400e",navy:"#1e3a8a",teal:"#14b8a6",cyan:"#06b6d4",indigo:"#6366f1",violet:"#8b5cf6",lime:"#84cc16",emerald:"#10b981",rose:"#f43f5e",fuchsia:"#d946ef",slate:"#64748b",neutral:"#737373",stone:"#78716c",zinc:"#71717a","light-blue":"#38bdf8","dark-blue":"#1e40af","light-green":"#4ade80","dark-green":"#232E23","light-gray":"#d1d5db","dark-gray":"#374151","light-grey":"#d1d5db","dark-grey":"#374151","dark-brown":"#6b4a1b",beige:"#f5f5dc",maroon:"#800000",olive:"#808000",aqua:"#00ffff",silver:"#c0c0c0",gold:"#ffd700",coral:"#ff7f50",salmon:"#fa8072",khaki:"#f0e68c",sand:"#e7d3b7",plum:"#dda0dd",tan:"#d2b48c",crimson:"#dc143c",turquoise:"#40e0d0",lavender:"#e6e6fa",ivory:"#fffff0",mint:"#98fb98",peach:"#ffcba4",pistachio:"#93c572",cream:"#edd0ae","army-green":"#4b5320","navy-blue":"#000080",wood:"#8d6e63"}},19639:(e,t,r)=>{"use strict";r.r(t),r.d(t,{V0Setup:()=>s,default:()=>n});var a=r(12907);let s=(0,a.registerClientReference)(function(){throw Error("Attempted to call V0Setup() from the server but V0Setup is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/v0-setup.tsx","V0Setup"),n=(0,a.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/axelsamuelson/Downloads/crowdvine_01/components/v0-setup.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/v0-setup.tsx","default")},20152:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},23234:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var a=r(91199);async function s(){return{envs:[],allValid:!0}}r(42087),(0,r(33331).D)([s]),(0,a.A)(s,"002b4f93fdecce38ab41447362701e3bd7280469ab",null)},24934:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var a=r(60687),s=r(43210),n=r(11329),o=r(24224),i=r(96241);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-colors-and-shadows duration-300 ease-out focus-visible:outline-none focus-visible:border-border/15 focus-visible:ring-1 focus-visible:ring-primary/70 focus-visible:ring-offset-4 focus-visible:ring-offset-foreground/20 focus-visible:shadow-button-hover disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-6 [&_svg]:shrink-0 disabled:cursor-not-allowed",{variants:{variant:{default:"border border-border/50 hover:border-border/15 bg-primary/20 focus-visible:bg-primary/30 hover:bg-primary/30 backdrop-blur-sm text-primary ring-1 ring-offset-primary/10 ring-border/10 ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-background/10 backdrop-blur-lg text-foreground hover:bg-background/20",ghost:"font-medium text-foreground/50 hover:bg-accent hover:text-foreground/70 dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",iconButton:"border border-border/50 hover:border-border/15 bg-primary disabled:bg-primary/40 hover:bg-primary backdrop-blur-sm disabled:text-primary-foreground/50 text-primary-foreground ring-1 ring-offset-transparent ring-transparent ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover"},size:{sm:"h-8 px-3 text-xs",default:"h-9 px-4 py-2",lg:"h-10 px-8",icon:"size-9","icon-lg":"size-10","icon-xl":"size-11"},shine:{true:"relative overflow-hidden after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-white/20 after:to-transparent after:animate-shine after:pointer-events-none"}},defaultVariants:{variant:"default",size:"default",shine:!1}}),c=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,shine:o,...c},d)=>{let u=s?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:t,size:r,className:e,shine:o})),ref:d,...c})});c.displayName="Button"},33599:(e,t,r)=>{"use strict";r.d(t,{eJ:()=>n,gp:()=>a,tY:()=>s,yz:()=>o});let a={mode:"mode",collections:"collections",products:"products",collectionProducts:"collection-products",cart:"cart"},s=[{label:"37\xb047'33.4\"N 122\xb024'18.6\"W",href:"https://maps.app.goo.gl/MnpbPDEHxoDydc9M9"},{label:"(269) 682-1402",href:"https://joyco.studio/showcase"},{label:"Instagram",href:"https://www.instagram.com/joyco.studio/"}],n="nextjs-frontend-hidden",o=!1},33832:(e,t,r)=>{"use strict";r.d(t,{FooterLogoSvg:()=>s});var a=r(12907);(0,a.registerClientReference)(function(){throw Error("Attempted to call clearFooterLogoCache() from the server but clearFooterLogoCache is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/layout/footer-logo-svg.tsx","clearFooterLogoCache");let s=(0,a.registerClientReference)(function(){throw Error("Attempted to call FooterLogoSvg() from the server but FooterLogoSvg is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/layout/footer-logo-svg.tsx","FooterLogoSvg")},37307:(e,t,r)=>{Promise.resolve().then(r.bind(r,2586))},39131:(e,t,r)=>{"use strict";r.d(t,{VariantOptionSelector:()=>u,Y:()=>m,x:()=>h});var a=r(60687),s=r(24224),n=r(43210),o=r(16454),i=r(16189),l=r(24934),c=r(96241);let d=(0,s.F)("flex items-start gap-4",{variants:{variant:{card:"rounded-lg bg-popover py-2.5 px-3 justify-between",condensed:"justify-start"}},defaultVariants:{variant:"card"}});function u({option:e,variant:t,product:r}){let{variants:s,options:u}=r,m=(0,i.useSearchParams)(),h=(0,i.useParams)(),f=e.name.toLowerCase(),[p,x]=(0,o.ZA)(f,o.tU.withDefault("")),[v,b]=(0,o.ZA)("pid",o.tU.withDefault("")),g=()=>{let e={};return u.forEach(t=>{let r=t.name.toLowerCase(),a=m.get(r);a&&(e[r]=a)}),e},y=Array.isArray(s)?s.map(e=>({id:e.id,availableForSale:e.availableForSale,...e.selectedOptions.reduce((e,t)=>({...e,[t.name.toLowerCase()]:t.value}),{})})):[],w=h.handle===r.id,j=w||v===r.id;return(0,a.jsxs)("dl",{className:d({variant:t}),children:[(0,a.jsx)("dt",{className:"text-base font-semibold leading-7",children:e.name}),(0,a.jsx)("dd",{className:"flex flex-wrap gap-2",children:e.values.map((t,s)=>{let o=`${e.id}-${t.id||t.name}-${s}`,i="color"===f,d="grape variety"===f||"grape varieties"===f;if(i){let e=(0,c.jo)(t.name);return t.name&&t.name.split("/"),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:Array.isArray(e)?e[0]:e},title:t.name}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:t.name})]},o)}if(d)return(0,a.jsx)("span",{className:"text-sm text-gray-700",children:t.name},o);let m=Object.entries({...g(),[f]:t.id}).filter(([e,t])=>u.find(r=>r.name.toLowerCase()===e&&r.values.some(e=>e.name===t))),h=y.find(e=>m.every(([t,r])=>e[t]===r&&e.availableForSale)),v=j&&p===t.name;return(0,a.jsx)(l.$,{onClick:()=>{(0,n.startTransition)(()=>{x(t.name),w||b(r.id)})},variant:v?"default":"outline",size:"sm",disabled:!h,title:`${e.name} ${t.name}${h?"":" (Out of Stock)"}`,className:"min-w-[40px]",children:t.name},o)})})]})}let m=e=>{let{variants:t,options:r}=e,a=(0,i.useSearchParams)(),s=(()=>{let e={};return r.forEach(t=>{let r=t.name.toLowerCase(),s=a.get(r);s&&(e[r]=s)}),e})();return Array.isArray(t)?t.find(e=>e.selectedOptions.every(e=>e.value===s[e.name.toLowerCase()])):void 0},h=(e,t)=>{let r=(0,n.useMemo)(()=>Array.isArray(e.images)?e.images:[],[e.images]),a=(0,n.useMemo)(()=>t?.reduce((e,t)=>(e[t.name.toLowerCase()]=t.value.toLowerCase(),e),{}),[t]),s=(0,n.useMemo)(()=>{if(!a||0===Object.keys(a).length)return[];let e=Object.values(a);return r.filter(t=>{if(!t.altText)return!1;let r=t.altText.toLowerCase();return e.some(e=>r.includes(e.toLowerCase()))})},[a,r]),o=(0,n.useMemo)(()=>a?r.filter(e=>Object.entries(a||{}).every(([t,r])=>e.selectedOptions?.some(e=>e.name===t&&e.value===r))):[],[a,r]),i=r.filter(e=>!e.selectedOptions),l=e.featuredImage;return o.length>0?o:s.length>0?s:i.length>0?i:l?[l]:r.length>0?[r[0]]:[]}},41070:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var a=r(60687),s=r(85814),n=r.n(s),o=r(96241);function i({collections:e,label:t="Shop",align:r="left",className:s}){return(0,a.jsxs)("div",{className:(0,o.cn)("right"===r?"text-right":"text-left",s),children:[(0,a.jsx)("h4",{className:"text-lg font-extrabold md:text-xl",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-1.5 leading-5 mt-5",children:e.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(n(),{href:`/shop/${e.handle}`,prefetch:!0,children:e.title})},`${e.handle}-${t}`))})]})}},44020:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,MobileMenuProvider:()=>o});var a=r(60687),s=r(43210);let n=(0,s.createContext)(void 0);function o({children:e}){let[t,r]=(0,s.useState)(!1);return(0,a.jsx)(n.Provider,{value:{isOpen:t,openMobileMenu:()=>r(!0),closeMobileMenu:()=>r(!1)},children:e})}function i(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useMobileMenu must be used within a MobileMenuProvider");return e}},45063:(e,t,r)=>{"use strict";r.d(t,{B5:()=>m,EM:()=>f,Xl:()=>p,fk:()=>h});var a=r(91199);r(42087);let s={cart:"cart"};var n=r(7944),o=r(7593),i=r(74208),l=r(55511);let c="cv_cart_id";async function d(){let e=await (0,i.UL)(),t=e.get(c)?.value;return t||(t=(0,l.randomUUID)(),e.set(c,t,{httpOnly:!0,sameSite:"lax",path:"/",maxAge:7776e3,secure:!0})),t}class u{static async ensureCart(){let e=await d(),t=await (0,o.w)(),{data:r,error:a}=await t.from("carts").select("id").eq("session_id",e).single();if(!r){let{data:r,error:a}=await t.from("carts").insert({session_id:e}).select("id").single();if(a)throw Error("Failed to create cart");return r.id}return r.id}static async getCart(){try{await d();let e=await (0,o.w)(),{data:t,error:r}=await e.from("cart_items").select(`
          id,
          quantity,
          wines (
            id,
            handle,
            wine_name,
            vintage,
            label_image_path,
            base_price_cents
          )
        `).eq("cart_id",await this.ensureCart()).order("created_at",{ascending:!1});if(r)return console.error("Failed to get cart items:",r),null;if(!t||0===t.length)return{id:await this.ensureCart(),checkoutUrl:"/checkout",cost:{subtotalAmount:{amount:"0.00",currencyCode:"SEK"},totalAmount:{amount:"0.00",currencyCode:"SEK"},totalTaxAmount:{amount:"0.00",currencyCode:"SEK"}},totalQuantity:0,lines:[]};let a=t.map(e=>({id:e.id,quantity:e.quantity,cost:{totalAmount:{amount:(e.wines.base_price_cents*e.quantity/100).toFixed(2),currencyCode:"SEK"}},merchandise:{id:e.wines.id,title:`${e.wines.wine_name} ${e.wines.vintage}`,selectedOptions:[],product:{id:e.wines.id,title:`${e.wines.wine_name} ${e.wines.vintage}`,handle:e.wines.handle,description:"",descriptionHtml:"",productType:"wine",categoryId:"",options:[],variants:[{id:`${e.wines.id}-default`,title:"750 ml",availableForSale:!0,price:{amount:(e.wines.base_price_cents/100).toFixed(2),currencyCode:"SEK"},selectedOptions:[]}],priceRange:{minVariantPrice:{amount:(e.wines.base_price_cents/100).toFixed(2),currencyCode:"SEK"},maxVariantPrice:{amount:(e.wines.base_price_cents/100).toFixed(2),currencyCode:"SEK"}},featuredImage:{id:`${e.wines.id}-img`,url:e.wines.label_image_path,altText:e.wines.wine_name,width:600,height:600},images:[{id:`${e.wines.id}-img`,url:e.wines.label_image_path,altText:e.wines.wine_name,width:600,height:600}],seo:{title:e.wines.wine_name,description:""},tags:[],availableForSale:!0,currencyCode:"SEK",updatedAt:new Date().toISOString(),createdAt:new Date().toISOString()}}})),s=a.reduce((e,t)=>e+parseFloat(t.cost.totalAmount.amount),0);return{id:await this.ensureCart(),checkoutUrl:"/checkout",cost:{subtotalAmount:{amount:s.toFixed(2),currencyCode:"SEK"},totalAmount:{amount:s.toFixed(2),currencyCode:"SEK"},totalTaxAmount:{amount:"0.00",currencyCode:"SEK"}},totalQuantity:a.reduce((e,t)=>e+t.quantity,0),lines:a}}catch(e){return console.error("=== CART SERVICE GET CART ERROR ==="),console.error("CartService.getCart error:",e),console.error("Error stack:",e instanceof Error?e.stack:"No stack trace"),console.error("=== CART SERVICE GET CART ERROR END ==="),null}}static async addItem(e,t=1){try{let r=await this.ensureCart(),a=await (0,o.w)(),{data:s,error:n}=await a.from("cart_items").select("id, quantity").eq("cart_id",r).eq("wine_id",e).single();if(n&&"PGRST116"!==n.code&&console.error("Error checking for existing item:",n),s){let{data:e,error:r}=await a.from("cart_items").update({quantity:s.quantity+t}).eq("id",s.id).select("*").single();if(r)throw console.error("Failed to update cart item:",r),Error("Failed to update cart item")}else{let{data:s,error:n}=await a.from("cart_items").insert({cart_id:r,wine_id:e,quantity:t}).select("*").single();if(n)throw console.error("Failed to add cart item:",n),Error("Failed to add cart item")}return await this.getCart()}catch(e){return console.error("=== CART SERVICE ADD ITEM ERROR ==="),console.error("CartService.addItem error:",e),console.error("Error stack:",e instanceof Error?e.stack:"No stack trace"),console.error("=== CART SERVICE ADD ITEM ERROR END ==="),null}}static async updateItem(e,t){try{let r=await (0,o.w)();if(t<=0){let{error:t}=await r.from("cart_items").delete().eq("id",e);if(t)throw console.error("Failed to remove cart item:",t),Error("Failed to remove cart item")}else{let{error:a}=await r.from("cart_items").update({quantity:t}).eq("id",e);if(a)throw console.error("Failed to update cart item:",a),Error("Failed to update cart item")}return await this.getCart()}catch(e){return console.error("CartService.updateItem error:",e),null}}static async removeItem(e){try{let t=await (0,o.w)(),{error:r}=await t.from("cart_items").delete().eq("id",e);if(r)throw console.error("Failed to remove cart item:",r),Error("Failed to remove cart item");return await this.getCart()}catch(e){return console.error("CartService.removeItem error:",e),null}}static async clearCart(){try{await d();let e=await (0,o.w)(),{error:t}=await e.from("cart_items").delete().eq("cart_id",await this.ensureCart());if(t)throw console.error("Failed to clear cart:",t),Error("Failed to clear cart")}catch(e){throw console.error("CartService.clearCart error:",e),e}}}async function m(e){if(console.log("=== ADD ITEM SERVER ACTION START ==="),console.log("addItem server action called with variantId:",e),!e)return console.error("addItem: No variantId provided"),null;try{let t=e.replace("-default","");console.log("Extracted base ID from variant ID:",{variantId:e,baseId:t}),console.log("Calling CartService.addItem...");let r=await u.addItem(t,1);return console.log("CartService.addItem completed with result:",r),console.log("Calling revalidateTag..."),(0,n.revalidateTag)(s.cart),console.log("revalidateTag completed"),console.log("=== ADD ITEM SERVER ACTION END ==="),r}catch(e){return console.error("=== ADD ITEM SERVER ACTION ERROR ==="),console.error("addItem error:",e),console.error("Error stack:",e instanceof Error?e.stack:"No stack trace"),console.error("=== ADD ITEM SERVER ACTION ERROR END ==="),null}}async function h({lineId:e,quantity:t}){try{let r=await u.updateItem(e,t);return(0,n.revalidateTag)(s.cart),r}catch(e){return console.error("updateItem error:",e),null}}async function f(){try{let e=await u.getCart();return(0,n.revalidateTag)(s.cart),e}catch(e){return console.error("createCartAndSetCookie error:",e),null}}async function p(){try{return await u.getCart()}catch(e){return console.error("getCart error:",e),null}}(0,r(33331).D)([m,h,f,p]),(0,a.A)(m,"402eefbf27465ab7a9e2720f0501458518d9ba2628",null),(0,a.A)(h,"404ce88c125f79e5b61af93c3739bd192b253aa6f7",null),(0,a.A)(f,"006ce0741515c18fd40bece93393d603e10d5a23d5",null),(0,a.A)(p,"00643ce809e6ce20ef66f5929e0946f9a0888cb71e",null)},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},46594:(e,t,r)=>{"use strict";r.d(t,{UZ:()=>l,qM:()=>c,sk:()=>d});var a=r(60687),s=r(43210),n=r(96241),o=r(92576),i=r(88920);let l={sm:"size-6",md:"size-8",lg:"size-10"};function c({color:e,isSelected:t,onColorChange:r,size:s="md",atLeastOneColorSelected:o}){let i=Array.isArray(e),c=i?`${e[0].name} & ${e[1].name}`:e.name;return(0,a.jsxs)("button",{className:(0,n.cn)("rounded-full ring ring-accent cursor-pointer transition-[outline,box-shadow,opacity] relative overflow-hidden",l[s],t?"ring-2 opacity-100 ring-primary/80":o?"opacity-40 hover:ring-primary/30 hover:opacity-70":"opacity-100"),title:c,onClick:()=>r(e),"aria-pressed":t,"aria-label":`Select color: ${c}`,children:[i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-1/2 h-full",style:{backgroundColor:e[0].value}}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1/2 h-full",style:{backgroundColor:e[1].value}})]}):(0,a.jsx)("div",{className:"w-full h-full",style:{backgroundColor:e.value}}),(0,a.jsx)("span",{className:"sr-only",children:c})]})}function d({colors:e,selectedColors:t,onColorChange:r,size:d="md",className:u}){let[m,h]=(0,s.useState)(!1),f=t.length>0,p=e=>t.some(t=>Array.isArray(e)&&Array.isArray(t)?e[0].value===t[0].value&&e[1].value===t[1].value:!(Array.isArray(e)||Array.isArray(t))&&e.value===t.value),x=m?o.P.div:"div";return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-wrap gap-1.5",u),children:m?(0,a.jsx)(i.N,{initial:!1,children:e.map((e,t)=>(0,a.jsx)(x,{layout:"position",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2,delay:.05*t,ease:"easeOut"},className:l[d],children:(0,a.jsx)(c,{color:e,isSelected:p(e),onColorChange:r,size:d,atLeastOneColorSelected:f})},Array.isArray(e)?`${e[0].value}-${e[1].value}`:e.value))}):e.map(e=>(0,a.jsx)(x,{className:l[d],children:(0,a.jsx)(c,{color:e,isSelected:p(e),onColorChange:r,size:d,atLeastOneColorSelected:f})},Array.isArray(e)?`${e[0].value}-${e[1].value}`:e.value))})}},49770:(e,t,r)=>{"use strict";r.d(t,{L:()=>n,c:()=>o});var a=r(60687),s=r(43210);function n(){window.dispatchEvent(new CustomEvent("logoCacheCleared"))}function o({className:e}){let[t,r]=(0,s.useState)(null),[n,o]=(0,s.useState)(!0),[i,l]=(0,s.useState)(0);return n?(0,a.jsx)("div",{className:e,style:{backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%"}})}):t?(0,a.jsx)("img",{src:t,alt:"CrowdVine Logo",className:e,style:{objectFit:"contain"},loading:"eager",fetchPriority:"high"}):(0,a.jsxs)("svg",{width:"292",height:"61",viewBox:"0 0 292 61",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[(0,a.jsx)("path",{d:"M0 58.9432L20.7844 1.29902H35.3984L56.1828 58.9432H43.3549L39.1331 46.6837H16.9685L12.7467 58.9432H0ZM20.4596 36.535H35.7232L28.0914 14.2893L20.4596 36.535Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M82.7703 60.2422C67.0196 60.2422 55.7343 49.0381 55.7343 30.2023C55.7343 11.8536 66.3701 0 83.0138 0C98.115 0 106.234 7.71295 108.67 21.4339L95.8417 21.921C94.5427 14.6952 90.1585 10.3922 83.0138 10.3922C73.8395 10.3922 68.481 18.1863 68.481 30.2023C68.481 42.3806 74.083 49.85 82.9326 49.85C90.6456 49.85 94.8674 45.2223 96.0041 37.4281L108.913 37.9153C106.559 51.9609 97.7902 60.2422 82.7703 60.2422Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M115.054 58.9432V1.29902H131.535L146.23 43.2737L160.844 1.29902H177.326V58.9432H164.985V21.5963L151.426 58.7808H140.872L127.394 21.5963V58.9432H115.054Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M186.205 58.9432V1.29902H226.312V11.6912H198.546V24.925H225.338V35.1548H198.546V48.551H226.962V58.9432H186.205Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M262.041 59.9175C245.479 59.9175 232.083 46.5213 232.083 29.8775C232.083 13.3962 245.479 0 262.041 0C278.604 0 292 13.3962 292 29.8775C292 46.5213 278.604 59.9175 262.041 59.9175ZM262.041 52.4481C274.138 52.4481 284.368 42.4618 284.368 29.8775C284.368 17.4556 274.138 7.46939 262.041 7.46939C249.944 7.46939 239.714 17.4556 239.714 29.8775C239.714 42.4618 249.944 52.4481 262.041 52.4481ZM262.366 46.2777C252.867 46.2777 246.372 39.6202 246.372 29.8775C246.372 20.2161 252.867 13.6397 262.366 13.6397C270.566 13.6397 276.736 18.8358 277.467 26.3864L268.78 26.7924C268.212 22.9765 265.695 20.7032 262.366 20.7032C257.982 20.7032 255.059 24.1943 255.059 29.8775C255.059 35.642 257.982 39.1331 262.366 39.1331C265.938 39.1331 268.455 36.8598 268.942 32.7192L277.711 33.0439C276.98 40.8381 270.81 46.2777 262.366 46.2777Z",fill:"currentColor"})]})}},52608:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/axelsamuelson/Downloads/crowdvine_01/app/error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/app/error.tsx","default")},53091:(e,t,r)=>{"use strict";r.d(t,{DebugGrid:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call DebugGrid() from the server but DebugGrid is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/debug-grid.tsx","DebugGrid")},53557:(e,t,r)=>{"use strict";r.d(t,{U:()=>d});var a=r(37413),s=r(33599),n=r(66819),o=r(50662),i=r(4536),l=r.n(i);let c=(0,o.F)("leading-tight transition-colors hover:underline ease-out duration-200 whitespace-nowrap",{variants:{invert:{true:"text-background/50 hover:text-background",false:"text-muted-foreground hover:text-foreground"},size:{sm:"text-xs 2xl:text-sm",base:"text-sm 2xl:text-base"}},defaultVariants:{invert:!1,size:"sm"}});function d({className:e,invert:t,size:r}){return(0,a.jsx)("ul",{className:(0,n.cn)("flex flex-row gap-2 justify-between",e),children:s.tY.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:e.href,target:"_blank",className:c({invert:t,size:r}),children:e.label})},e.href))})}},53976:(e,t,r)=>{"use strict";r.d(t,{$g:()=>a});let a=(e,t)=>{let r=Math.ceil("string"==typeof e?parseFloat(e):e);return new Intl.NumberFormat("sv-SE",{style:"currency",currency:t,currencyDisplay:"narrowSymbol",minimumFractionDigits:0,maximumFractionDigits:0}).format(r)}},55e3:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},58014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w,metadata:()=>y});var a=r(37413),s=r(56389),n=r.n(s),o=r(51189),i=r.n(o);r(82704);var l=r(6931),c=r(75592),d=r(91436),u=r(53091),m=r(33599),h=r(67274),f=r(28558),p=r(2923),x=r(67998),v=r(66819);let b=(0,f.default)(()=>Promise.resolve().then(r.bind(r,19639)),{loadableGenerated:{modules:["app/layout.tsx -> @/components/v0-setup"]}}),g=process.env.VERCEL_URL?.includes("vusercontent.net")??!1,y={title:"ACME Store",description:"ACME Store, your one-stop shop for all your needs.",generator:"v0.app"};async function w({children:e}){return(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{className:(0,v.cn)(n().variable,i().variable,"antialiased min-h-screen",{"is-v0":g}),suppressHydrationWarning:!0,children:(0,a.jsxs)(p.V0Provider,{isV0:g,children:[(0,a.jsx)(x.MobileMenuProvider,{children:(0,a.jsx)(d.CartProvider,{children:(0,a.jsxs)(c.NuqsAdapter,{children:[(0,a.jsxs)("main",{"data-vaul-drawer-wrapper":"true",children:[(0,a.jsx)(h.ConditionalHeader,{collections:[]}),e]}),m.yz&&(0,a.jsx)(u.DebugGrid,{}),(0,a.jsx)(l.Toaster,{closeButton:!0,position:"bottom-right"})]})})}),g&&(0,a.jsx)(b,{})]})})})}},60358:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var a=r(6475);let s=(0,a.createServerReference)("402eefbf27465ab7a9e2720f0501458518d9ba2628",a.callServer,void 0,a.findSourceMapURL,"addItem")},62386:(e,t,r)=>{Promise.resolve().then(r.bind(r,18098)),Promise.resolve().then(r.t.bind(r,85814,23))},63568:(e,t,r)=>{"use strict";r.r(t),r.d(t,{V0Setup:()=>i,default:()=>l});var a=r(60687),s=r(6475);let n=(0,s.createServerReference)("002b4f93fdecce38ab41447362701e3bd7280469ab",s.callServer,void 0,s.findSourceMapURL,"checkEnvs");var o=r(46992);let i=()=>(0,a.jsx)(o.jb,{title:"V0 Ecommerce Setup",description:"Setup your V0 ecommerce template",envCheckAction:n}),l=i},66503:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var a=r(37413),s=r(90364),n=r(53557),o=r(33832);function i(){return(0,a.jsx)("footer",{className:"p-sides",children:(0,a.jsxs)("div",{className:"w-full md:h-[532px] p-sides md:p-11 text-background bg-foreground rounded-[12px] flex flex-col justify-between max-md:gap-8",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between md:flex-row",children:[(0,a.jsx)("div",{className:"md:basis-3/4 max-md:w-full max-w-[1200px] h-auto block",children:(0,a.jsx)(o.FooterLogoSvg,{className:"h-12 w-auto"})}),(0,a.jsx)(s.e,{collections:[],className:"max-md:hidden",align:"right"}),(0,a.jsx)("span",{className:"mt-3 italic font-semibold md:hidden",children:"Refined. Minimal. Never boring."})]}),(0,a.jsxs)("div",{className:"flex justify-between max-md:contents text-muted-foreground",children:[(0,a.jsx)(n.U,{className:"max-w-[450px] w-full max-md:flex-col",size:"base",invert:!0}),(0,a.jsxs)("p",{className:"text-base",children:[new Date().getFullYear(),"\xa9 — All rights reserved"]})]})]})})}let l=({children:e,className:t})=>(0,a.jsxs)("div",{className:`pt-top-spacing ${t||""}`,children:[(0,a.jsx)("main",{children:e}),(0,a.jsx)(i,{})]})},66819:(e,t,r)=>{"use strict";r.d(t,{IR:()=>o,cn:()=>n});var a=r(75986),s=r(8974);function n(...e){return(0,s.QP)((0,a.$)(e))}r(33599);let o=e=>{let t=["top-left","bottom-right","top-right","bottom-left"];return t[e%t.length]}},67274:(e,t,r)=>{"use strict";r.d(t,{ConditionalHeader:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call ConditionalHeader() from the server but ConditionalHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/layout/header/conditional-header.tsx","ConditionalHeader")},67998:(e,t,r)=>{"use strict";r.d(t,{MobileMenuProvider:()=>s});var a=r(12907);let s=(0,a.registerClientReference)(function(){throw Error("Attempted to call MobileMenuProvider() from the server but MobileMenuProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/layout/header/mobile-menu-context.tsx","MobileMenuProvider");(0,a.registerClientReference)(function(){throw Error("Attempted to call useMobileMenu() from the server but useMobileMenu is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/layout/header/mobile-menu-context.tsx","useMobileMenu")},71651:(e,t,r)=>{Promise.resolve().then(r.bind(r,52608))},76880:(e,t,r)=>{Promise.resolve().then(r.bind(r,9374)),Promise.resolve().then(r.bind(r,653)),Promise.resolve().then(r.bind(r,84290)),Promise.resolve().then(r.bind(r,44020)),Promise.resolve().then(r.bind(r,63568)),Promise.resolve().then(r.bind(r,96501)),Promise.resolve().then(r.bind(r,56780)),Promise.resolve().then(r.bind(r,87158)),Promise.resolve().then(r.bind(r,5781)),Promise.resolve().then(r.bind(r,52581))},82366:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(37413),s=r(4536),n=r.n(s),o=r(66503);function i(){return(0,a.jsx)(o.M,{children:(0,a.jsx)("div",{className:"min-h-[90vh] flex items-center justify-center px-4",children:(0,a.jsx)("div",{className:"text-center max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-8xl font-bold text-primary/20 mb-4",children:"404"}),(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-foreground mb-2",children:["Page Not Found."," ",(0,a.jsx)(n(),{href:"/",className:"underline",children:"Go Back Home"})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Sorry, we couldn't find the page you're looking for. The page might have been moved, deleted, or you entered the wrong URL."})]})})})})}},82704:()=>{},84290:(e,t,r)=>{"use strict";r.d(t,{ConditionalHeader:()=>H});var a=r(60687),s=r(16189),n=r(43210),o=r(24934),i=r(88920),l=r(92576),c=r(85814),d=r.n(c),u=r(41070),m=r(95715),h=r(44020);let f=[{href:"/",label:"Home"},{href:"/shop",label:"Shop"},{href:"/about",label:"About"},{href:"/contact",label:"Contact"}];function p({collections:e}){let{isOpen:t,openMobileMenu:r,closeMobileMenu:c}=(0,h.H)();(0,s.usePathname)();let[p,x]=(0,n.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.$,{onClick:r,"aria-label":"Open mobile menu",variant:"secondary",size:"sm",className:"uppercase md:hidden",children:"Menu"}),p&&(0,a.jsx)(i.N,{children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"fixed inset-0 z-50 bg-foreground/30",onClick:c,"aria-hidden":"true"}),(0,a.jsx)(l.P.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeInOut"},className:"fixed top-0 bottom-0 left-0 flex w-full md:w-[400px] p-modal-sides z-50",children:(0,a.jsxs)("div",{className:"flex flex-col p-3 w-full rounded bg-muted md:p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-baseline pl-2 mb-10",children:[(0,a.jsx)("p",{className:"text-2xl font-semibold",children:"Menu"}),(0,a.jsx)(o.$,{size:"sm",variant:"ghost","aria-label":"Close cart",onClick:c,children:"Close"})]}),(0,a.jsxs)("nav",{className:"grid grid-cols-2 gap-y-4 gap-x-6 mb-10",children:[f.map(e=>(0,a.jsx)(o.$,{size:"sm",variant:"secondary",onClick:c,className:"justify-start uppercase bg-background/50",asChild:!0,children:(0,a.jsx)(d(),{href:e.href,prefetch:!0,children:e.label})},e.href)),(0,a.jsx)(o.$,{size:"sm",variant:"secondary",onClick:c,className:"justify-start uppercase bg-background/50",asChild:!0,children:(0,a.jsx)(d(),{href:"/profile",prefetch:!0,children:"Profile"})})]}),(0,a.jsx)(u.e,{label:"Categories",collections:e}),(0,a.jsxs)("div",{className:"mt-auto mb-6 text-sm leading-tight opacity-50",children:[(0,a.jsx)("p",{className:"italic",children:"Refined. Minimal. Never boring."}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("p",{children:"Furniture that speaks softly, but stands out loud."}),(0,a.jsx)("p",{children:"Clean lines, crafted with wit."}),(0,a.jsx)("p",{children:"Elegance with a wink — style first"})]})]}),(0,a.jsx)(m.U,{className:"gap-2 w-full"})]})})]})})]})}var x=r(96241),v=r(49770),b=r(1303),g=r(70334),y=r(51215),w=r(9374),j=r(92251),C=r(19361),N=r(30474);function S({item:e}){let{updateItem:t}=(0,w._)(),r=e.id,s=e.merchandise.id;return(0,a.jsx)("form",{className:"-mr-1 -mb-1 opacity-70",onSubmit:e=>{e.preventDefault(),t(r,s,0,"delete")},children:(0,a.jsx)(o.$,{type:"submit",size:"sm",variant:"ghost","aria-label":"Remove item",className:"px-2 text-sm",children:"Remove"})})}var A=r(96474),k=r(5748),E=r(49384);function P({type:e}){return(0,a.jsx)("button",{type:"submit","aria-label":"plus"===e?"Increase item quantity":"Reduce item quantity",className:(0,E.A)("ease flex h-full min-w-[36px] max-w-[36px] flex-none items-center justify-center rounded-full p-2 transition-all duration-200 hover:border-neutral-800 hover:opacity-80",{"ml-auto":"minus"===e}),children:"plus"===e?(0,a.jsx)(A.A,{className:"h-4 w-4"}):(0,a.jsx)(k.A,{className:"h-4 w-4"})})}function I({item:e,type:t}){let{updateItem:r}=(0,w._)(),s="plus"===t?e.quantity+1:e.quantity-1;return(0,a.jsx)("form",{onSubmit:a=>{a.preventDefault(),r(e.id,e.merchandise.id,s,t)},children:(0,a.jsx)(P,{type:t})})}var M=r(53976),_=r(46594),R=r(39131);function D({item:e,onCloseCart:t}){let r={};e.merchandise.selectedOptions.forEach(({name:e,value:t})=>{t!==C.E6&&(r[e.toLowerCase()]=t.toLowerCase())});let s=(0,x.cO)(`/product/${e.merchandise.product.handle}`,new URLSearchParams(r)),n=e.merchandise.selectedOptions.find(e=>"color"===e.name.toLowerCase()),[o]=(0,R.x)(e.merchandise.product,e.merchandise.selectedOptions),i=o&&o.url;return(0,a.jsx)("div",{className:"bg-popover rounded-lg p-2",children:(0,a.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,a.jsxs)("div",{className:"relative size-[120px] overflow-hidden rounded-sm shrink-0",children:[i?(0,a.jsx)(N.default,{className:"size-full object-cover",width:240,height:240,blurDataURL:o.url,alt:o.altText||e.merchandise.product.title,src:o.url}):(0,a.jsx)("div",{className:"size-full bg-muted flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"No image"})}),n&&(0,a.jsx)("div",{className:"flex absolute bottom-1 left-1",children:(0,a.jsx)(_.qM,{color:(()=>{let e=(0,x.jo)(n.value);return Array.isArray(e)?[{name:n.value,value:e[0]},{name:n.value,value:e[1]}]:{name:n.value,value:e}})(),isSelected:!1,onColorChange:()=>{},size:"sm",atLeastOneColorSelected:!1})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 2xl:gap-3 flex-1",children:[(0,a.jsx)(d(),{href:s,onClick:t,className:"z-30 flex flex-col justify-center",prefetch:!0,children:(0,a.jsx)("span",{className:"2xl:text-lg font-semibold",children:e.merchandise.product.title})}),(0,a.jsx)("p",{className:"2xl:text-lg font-semibold",children:(0,M.$g)(e.cost.totalAmount.amount,e.cost.totalAmount.currencyCode)}),(0,a.jsxs)("div",{className:"flex justify-between items-end mt-auto",children:[(0,a.jsxs)("div",{className:"flex h-8 flex-row items-center rounded-md border border-neutral-200",children:[(0,a.jsx)(I,{item:e,type:"minus"}),(0,a.jsx)("span",{className:"w-8 text-center text-sm",children:e.quantity}),(0,a.jsx)(I,{item:e,type:"plus"})]}),(0,a.jsx)(S,{item:e})]})]})]})})}let F=({children:e,className:t})=>(0,a.jsx)("div",{className:(0,x.cn)("px-3 md:px-4",t),children:e}),z=({closeCart:e})=>{let{cart:t}=(0,w._)();return t?(0,a.jsxs)("div",{className:"flex flex-col justify-between h-full overflow-hidden",children:[(0,a.jsxs)(F,{className:"flex justify-between px-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Products"}),(0,a.jsxs)("span",{children:[t.lines.length," items"]})]}),(0,a.jsx)("div",{className:"relative flex-1 min-h-0 py-4 overflow-x-hidden",children:(0,a.jsx)(F,{className:"overflow-y-auto flex flex-col gap-y-3 h-full scrollbar-hide",children:(0,a.jsx)(i.N,{children:t.lines.map((t,r)=>(0,a.jsx)(l.P.div,{layout:!0,exit:{opacity:0,x:-20},transition:{duration:.3,delay:.1*r,ease:"easeOut"},children:(0,a.jsx)(D,{item:t,onCloseCart:e})},t.merchandise.id))})})}),(0,a.jsxs)(F,{children:[(0,a.jsxs)("div",{className:"py-4 text-sm text-foreground/50 shrink-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center pb-1 mb-3 border-b border-muted-foreground/20",children:[(0,a.jsx)("p",{children:"Taxes"}),(0,a.jsx)("p",{className:"text-right",children:"Calculated at checkout"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-1 pb-1 mb-3 border-b border-muted-foreground/20",children:[(0,a.jsx)("p",{children:"Shipping"}),(0,a.jsx)("p",{className:"text-right",children:"Calculated at checkout"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-1 pb-1 mb-1.5 text-lg font-semibold",children:[(0,a.jsx)("p",{children:"Total"}),(0,a.jsx)("p",{className:"text-base text-right text-foreground",children:(0,M.$g)(t.cost.totalAmount.amount,t.cost.totalAmount.currencyCode)})]})]}),(0,a.jsx)($,{})]})]}):(0,a.jsx)(a.Fragment,{})},L=e=>JSON.stringify(e.lines.map(e=>({merchandiseId:e.merchandise.id,quantity:e.quantity})));function T(){let{cart:e,isPending:t}=(0,w._)(),[r,s]=(0,n.useState)(!1);(0,n.useRef)(e?L(e):void 0);let c=()=>s(!1);return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.$,{"aria-label":"Open cart",onClick:()=>s(!0),className:"uppercase",size:"sm",disabled:t,children:t?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 border border-current/40 border-t-current rounded-full animate-spin"}),(0,a.jsx)("span",{className:"max-md:hidden",children:"cart"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"max-md:hidden",children:"cart"})," (",e.totalQuantity,")"]})}),(0,a.jsx)(i.N,{children:r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"fixed inset-0 z-50 bg-foreground/30",onClick:c,"aria-hidden":"true"}),(0,a.jsx)(l.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.3,ease:"easeInOut"},className:"fixed top-0 bottom-0 right-0 flex w-full md:w-[500px] p-modal-sides z-50",children:(0,a.jsxs)("div",{className:"flex flex-col py-3 w-full rounded bg-muted md:py-4",children:[(0,a.jsxs)(F,{className:"flex justify-between items-baseline mb-10",children:[(0,a.jsx)("p",{className:"text-2xl font-semibold",children:"Cart"}),(0,a.jsx)(o.$,{size:"sm",variant:"ghost","aria-label":"Close cart",onClick:c,children:"Close"})]}),e&&0!==e.lines.length?(0,a.jsx)(z,{closeCart:c}):(0,a.jsx)(F,{className:"flex w-full",children:(0,a.jsx)(d(),{href:"/shop",className:"p-2 w-full rounded-lg border border-dashed bg-background border-border",onClick:c,children:(0,a.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,a.jsx)("div",{className:"flex overflow-hidden relative justify-center items-center rounded-sm border border-dashed size-20 shrink-0 border-border",children:(0,a.jsx)(b.A,{className:"size-6 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 gap-2 justify-center 2xl:gap-3",children:[(0,a.jsx)("span",{className:"text-lg font-semibold 2xl:text-xl",children:"Cart is empty"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground hover:underline",children:"Start shopping to get started"})]})]})})})]})})]})})]}):null}function $(){let{pending:e}=(0,y.useFormStatus)(),{cart:t,isPending:r}=(0,w._)(),n=(0,s.useRouter)(),c=t?.checkoutUrl;return(0,a.jsx)(o.$,{type:"submit",disabled:!c||r,size:"lg",className:"flex relative gap-3 justify-between items-center w-full",onClick:()=>{c&&n.push(c)},children:(0,a.jsx)(i.N,{initial:!1,mode:"wait",children:(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"flex justify-center items-center w-full",children:e?(0,a.jsx)(j.a,{size:"default"}):(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsx)("span",{children:"Proceed to Checkout"}),(0,a.jsx)(g.A,{className:"size-6"})]})},e?"loading":"content")})})}var O=r(58869);function V({className:e="",size:t="md"}){let[r,s]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),c={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return i?(0,a.jsxs)(o.$,{variant:"ghost",size:"sm",className:`p-2 hover:bg-background/20 transition-colors ${e}`,disabled:!0,children:[(0,a.jsx)(O.A,{className:c[t]}),(0,a.jsx)("span",{className:"sr-only",children:"Profile"})]}):(0,a.jsx)(o.$,{variant:"ghost",size:"sm",className:`p-2 hover:bg-background/20 transition-colors ${e} ${r?"text-green-600":"text-gray-600"}`,asChild:!0,children:(0,a.jsxs)(d(),{href:r?"/profile":"/log-in",prefetch:!0,children:[(0,a.jsx)(O.A,{className:c[t]}),(0,a.jsx)("span",{className:"sr-only",children:r?"Profile":"Sign In"})]})})}r(88105);let U=[{label:"home",href:"/"},{label:"boxes",href:"/shop/wine-boxes"},{label:"shop all",href:"/shop"}];function q({collections:e}){let t=(0,s.usePathname)();return(0,a.jsxs)("header",{className:"grid fixed top-0 left-0 z-50 grid-cols-3 items-start w-full p-sides md:grid-cols-12 md:gap-sides",children:[(0,a.jsx)("div",{className:"block flex-none md:hidden",children:(0,a.jsx)(p,{collections:e})}),(0,a.jsx)(d(),{href:"/",className:"md:col-span-3 xl:col-span-2",prefetch:!0,children:(0,a.jsx)(v.c,{className:"h-8 md:h-12 w-auto"})}),(0,a.jsxs)("nav",{className:"flex gap-2 justify-end items-center md:col-span-9 xl:col-span-10",children:[(0,a.jsx)("ul",{className:"items-center gap-5 py-0.5 px-3 bg-background/10 rounded-sm backdrop-blur-md hidden md:flex",children:U.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(d(),{href:e.href,className:(0,x.cn)("font-semibold text-base transition-colors duration-200 uppercase",t===e.href?"text-foreground":"text-foreground/50"),prefetch:!0,children:e.label})},e.href))}),(0,a.jsx)(V,{}),(0,a.jsx)(T,{})]})]})}function H({collections:e}){let t=(0,s.usePathname)(),r=t.startsWith("/admin"),n="/access-request"===t;return r||n?null:(0,a.jsx)(q,{collections:e})}},90253:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(31658);let s=async e=>[{type:"image/png",width:1200,height:630,url:(0,a.fillMetadataSegment)(".",await e.params,"opengraph-image.png")+"?08d8e662fb295020"}]},90364:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var a=r(37413),s=r(4536),n=r.n(s),o=r(66819);function i({collections:e,label:t="Shop",align:r="left",className:s}){return(0,a.jsxs)("div",{className:(0,o.cn)("right"===r?"text-right":"text-left",s),children:[(0,a.jsx)("h4",{className:"text-lg font-extrabold md:text-xl",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-1.5 leading-5 mt-5",children:e.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(n(),{href:`/shop/${e.handle}`,prefetch:!0,children:e.title})},`${e.handle}-${t}`))})]})}},91436:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>s});var a=r(12907);let s=(0,a.registerClientReference)(function(){throw Error("Attempted to call CartProvider() from the server but CartProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/cart/cart-context.tsx","CartProvider");(0,a.registerClientReference)(function(){throw Error("Attempted to call useCart() from the server but useCart is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/axelsamuelson/Downloads/crowdvine_01/components/cart/cart-context.tsx","useCart")},92251:(e,t,r)=>{"use strict";r.d(t,{a:()=>c});var a=r(60687);r(43210);var s=r(24224),n=r(92576),o=r(96241);let i=(0,s.F)("flex items-center justify-center",{variants:{size:{sm:"space-x-0.5",default:"space-x-1",lg:"space-x-1.5"}},defaultVariants:{size:"default"}}),l=(0,s.F)("bg-current rounded-[1px]",{variants:{size:{sm:"size-1",default:"size-1.5",lg:"size-2"}},defaultVariants:{size:"default"}});function c({size:e,className:t}){return(0,a.jsx)("div",{className:(0,o.cn)(i({size:e}),t),children:[0,1,2].map(t=>(0,a.jsx)(n.P.div,{className:(0,o.cn)(l({size:e})),animate:{opacity:[.3,1,.3]},transition:{duration:.8,repeat:1/0,delay:.2*t,ease:"easeInOut"}},t))})}},95715:(e,t,r)=>{"use strict";r.d(t,{U:()=>d});var a=r(60687),s=r(19361),n=r(96241),o=r(24224),i=r(85814),l=r.n(i);let c=(0,o.F)("leading-tight transition-colors hover:underline ease-out duration-200 whitespace-nowrap",{variants:{invert:{true:"text-background/50 hover:text-background",false:"text-muted-foreground hover:text-foreground"},size:{sm:"text-xs 2xl:text-sm",base:"text-sm 2xl:text-base"}},defaultVariants:{invert:!1,size:"sm"}});function d({className:e,invert:t,size:r}){return(0,a.jsx)("ul",{className:(0,n.cn)("flex flex-row gap-2 justify-between",e),children:s.tY.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:e.href,target:"_blank",className:c({invert:t,size:r}),children:e.label})},e.href))})}},96241:(e,t,r)=>{"use strict";r.d(t,{cO:()=>i,cn:()=>o,jo:()=>l});var a=r(49384),s=r(82348),n=r(19361);function o(...e){return(0,s.QP)((0,a.$)(e))}function i(e,t){let r=t?.toString(),a=`${r.length?"?":""}${r}`;return`${e}${a}`}function l(e){if(!e)return"#000000";let t=e.toLowerCase();if(n.hs[t])return n.hs[t];for(let[e,r]of Object.entries(n.hs))if(t.includes(e)||e.includes(t))return r;return"#666666"}},96501:(e,t,r)=>{"use strict";r.d(t,{V0Provider:()=>n});var a=r(60687);let s=(0,r(43210).createContext)(void 0),n=({children:e,isV0:t})=>(0,a.jsx)(s.Provider,{value:{isV0:t},children:e})},99338:(e,t,r)=>{Promise.resolve().then(r.bind(r,33832)),Promise.resolve().then(r.t.bind(r,4536,23))}};