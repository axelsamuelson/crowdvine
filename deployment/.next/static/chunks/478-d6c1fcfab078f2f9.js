"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{6367:(e,t,r)=>{r.d(t,{V:()=>d,Vv:()=>u,ex:()=>p,zj:()=>s});var l=r(22168),n=r(12115);let u={method:"throttle",timeMs:function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}()};function s(){let e=new Map;return{all:e,on(t,r){let l=e.get(t)||[];return l.push(r),e.set(t,l),()=>this.off(t,r)},off(t,r){let l=e.get(t);l&&e.set(t,l.filter(e=>e!==r))},emit(t,r){let l=e.get(t);l?.forEach(e=>e(r))}}}function i(e,t,r){let l=setTimeout(function(){e(),r.removeEventListener("abort",n)},t);function n(){clearTimeout(l),r.removeEventListener("abort",n)}r.addEventListener("abort",n)}function o(){let e=Promise;if(Promise.hasOwnProperty("withResolvers"))return Promise.withResolvers();let t=()=>{},r=()=>{};return{promise:new e((e,l)=>{t=e,r=l}),resolve:t,reject:r}}function a(){return new URLSearchParams(location.search)}var c=class{updateMap=new Map;options={history:"replace",scroll:!1,shallow:!0};timeMs=u.timeMs;transitions=new Set;resolvers=null;controller=null;lastFlushedAt=0;push({key:e,query:t,options:r},n=u.timeMs){(0,l.Yz)("[nuqs gtq] Enqueueing %s=%s %O",e,t,r),this.updateMap.set(e,t),"push"===r.history&&(this.options.history="push"),r.scroll&&(this.options.scroll=!0),!1===r.shallow&&(this.options.shallow=!1),r.startTransition&&this.transitions.add(r.startTransition),(!Number.isFinite(this.timeMs)||n>this.timeMs)&&(this.timeMs=n)}getQueuedQuery(e){return this.updateMap.get(e)}flush({getSearchParamsSnapshot:e=a,rateLimitFactor:t=1,...r}){if(this.controller??=new AbortController,!Number.isFinite(this.timeMs))return(0,l.Yz)("[nuqs gtq] Skipping flush due to throttleMs=Infinity"),Promise.resolve(e());if(this.resolvers)return this.resolvers.promise;this.resolvers=o();let n=()=>{this.lastFlushedAt=performance.now();let[t,l]=this.applyPendingUpdates({...r,autoResetQueueOnUpdate:r.autoResetQueueOnUpdate??!0,getSearchParamsSnapshot:e});null===l?this.resolvers.resolve(t):this.resolvers.reject(t),this.resolvers=null};return i(()=>{let e=performance.now()-this.lastFlushedAt,r=this.timeMs,u=t*Math.max(0,r-e);(0,l.Yz)("[nuqs gtq] Scheduling flush in %f ms. Throttled at %f ms (x%f)",u,r,t),0===u?n():i(n,u,this.controller.signal)},0,this.controller.signal),this.resolvers.promise}abort(){return this.controller?.abort(),this.controller=new AbortController,this.resolvers?.resolve(new URLSearchParams),this.resolvers=null,this.reset()}reset(){let e=Array.from(this.updateMap.keys());return(0,l.Yz)("[nuqs gtq] Resetting queue %s",JSON.stringify(Object.fromEntries(this.updateMap))),this.updateMap.clear(),this.transitions.clear(),this.options={history:"replace",scroll:!1,shallow:!0},this.timeMs=u.timeMs,e}applyPendingUpdates(e){let{updateUrl:t,getSearchParamsSnapshot:r}=e,n=r();if((0,l.Yz)("[nuqs gtq] Applying %d pending update(s) on top of %s",this.updateMap.size,n.toString()),0===this.updateMap.size)return[n,null];let u=Array.from(this.updateMap.entries()),s={...this.options},i=Array.from(this.transitions);for(let[t,r]of(e.autoResetQueueOnUpdate&&this.reset(),(0,l.Yz)("[nuqs gtq] Flushing queue %O with options %O",u,s),u))null===r?n.delete(t):n.set(t,r);try{return!function(e,t){let r=t;for(let t=e.length-1;t>=0;t--){let l=e[t];if(!l)continue;let n=r;r=()=>l(n)}r()}(i,()=>{t(n,s)}),[n,null]}catch(e){return console.error((0,l.z3)(429),u.map(([e])=>e).join(),e),[n,e]}}};let d=new c;var h=class{callback;resolvers=o();controller=new AbortController;queuedValue=void 0;constructor(e){this.callback=e}abort(){this.controller.abort(),this.queuedValue=void 0}push(e,t){return this.queuedValue=e,this.controller.abort(),this.controller=new AbortController,i(()=>{let t=this.resolvers;try{(0,l.Yz)("[nuqs dq] Flushing debounce queue",e);let r=this.callback(e);(0,l.Yz)("[nuqs dq] Reset debounce queue %O",this.queuedValue),this.queuedValue=void 0,this.resolvers=o(),r.then(e=>t.resolve(e)).catch(e=>t.reject(e))}catch(e){this.queuedValue=void 0,t.reject(e)}},t,this.controller.signal),this.resolvers.promise}};let p=new class{throttleQueue;queues=new Map;queuedQuerySync=s();constructor(e=new c){this.throttleQueue=e}useQueuedQueries(e){return function(e,t,r){let l=(0,n.useCallback)(()=>{let t=Object.fromEntries(e.map(e=>[e,r(e)]));return[JSON.stringify(t),t]},[e.join(","),r]),u=(0,n.useRef)(null);null===u.current&&(u.current=l());let s=(0,n.useCallback)(r=>{let l=e.map(e=>t(e,r));return()=>l.forEach(e=>e())},[e.join(","),t]);return(0,n.useSyncExternalStore)(s,()=>{let[e,t]=l();return u.current[0]===e?u.current[1]:(u.current=[e,t],t)},()=>u.current[1])}(e,(e,t)=>this.queuedQuerySync.on(e,t),e=>this.getQueuedQuery(e))}push(e,t,r){if(!Number.isFinite(t))return Promise.resolve((r.getSearchParamsSnapshot??a)());let n=e.key;if(!this.queues.has(n)){(0,l.Yz)("[nuqs dqc] Creating debounce queue for `%s`",n);let e=new h(e=>(this.throttleQueue.push(e),this.throttleQueue.flush(r).finally(()=>{void 0===this.queues.get(e.key)?.queuedValue&&((0,l.Yz)("[nuqs dqc] Cleaning up empty queue for `%s`",e.key),this.queues.delete(e.key)),this.queuedQuerySync.emit(e.key)})));this.queues.set(n,e)}(0,l.Yz)("[nuqs dqc] Enqueueing debounce update %O",e);let u=this.queues.get(n).push(e,t);return this.queuedQuerySync.emit(n),u}abort(e){let t=this.queues.get(e);return t?((0,l.Yz)("[nuqs dqc] Aborting debounce queue %s=%s",e,t.queuedValue?.query),this.queues.delete(e),t.abort(),this.queuedQuerySync.emit(e),e=>(e.then(t.resolvers.resolve,t.resolvers.reject),e)):e=>e}abortAll(){for(let[e,t]of this.queues.entries())(0,l.Yz)("[nuqs dqc] Aborting debounce queue %s=%s",e,t.queuedValue?.query),t.abort(),t.resolvers.resolve(new URLSearchParams),this.queuedQuerySync.emit(e);this.queues.clear()}getQueuedQuery(e){let t=this.queues.get(e)?.queuedValue?.query;return void 0!==t?t:this.throttleQueue.getQueuedQuery(e)}}(d)},10478:(e,t,r)=>{r.d(t,{IN:()=>c,ZA:()=>f,tU:()=>o});var l=r(6367),n=r(22168),u=r(12115);function s(e,t,r){try{return e(t)}catch(e){return(0,n.R8)("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,e,r),null}}function i(e){function t(t){if(void 0===t)return null;let r="";if(Array.isArray(t)){if(void 0===t[0])return null;r=t[0]}return"string"==typeof t&&(r=t),s(e.parse,r)}return{eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide(r){var l;return null!==(l=t(r))&&void 0!==l?l:e}}},withOptions(e){return{...this,...e}}}}let o=i({parse:e=>e,serialize:String});function a(e,t){return e.valueOf()===t.valueOf()}function c(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",l=null!==(t=e.eq)&&void 0!==t?t:(e,t)=>e===t,n=encodeURIComponent(r);return i({parse:t=>""===t?[]:t.split(r).map((t,l)=>s(e.parse,t.replaceAll(n,r),"[".concat(l,"]"))).filter(e=>null!=e),serialize:t=>t.map(t=>(e.serialize?e.serialize(t):String(t)).replaceAll(r,n)).join(r),eq:(e,t)=>e===t||e.length===t.length&&e.every((e,r)=>l(e,t[r]))})}i({parse:e=>{let t=parseInt(e);return t==t?t:null},serialize:e=>""+Math.round(e)}),i({parse:e=>{let t=parseInt(e);return t==t?t-1:null},serialize:e=>""+Math.round(e+1)}),i({parse:e=>{let t=parseInt(e,16);return t==t?t:null},serialize:e=>{let t=Math.round(e).toString(16);return(1&t.length?"0":"")+t}}),i({parse:e=>{let t=parseFloat(e);return t==t?t:null},serialize:String}),i({parse:e=>"true"===e,serialize:String}),i({parse:e=>{let t=parseInt(e);return t==t?new Date(t):null},serialize:e=>""+e.valueOf(),eq:a}),i({parse:e=>{let t=new Date(e);return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString(),eq:a}),i({parse:e=>{let t=new Date(e.slice(0,10));return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString().slice(0,10),eq:a});let d=(0,l.zj)(),h={};function p(e,t,r,l,n,u){let i=!1,o=Object.keys(e).reduce((o,a)=>{var c,d,h,p;let v=null!==(c=null==t?void 0:t[a])&&void 0!==c?c:a,{parse:f}=e[a],m=l[v],g=void 0===m?null!==(d=null==r?void 0:r.get(v))&&void 0!==d?d:null:m;if(n&&u&&(null!==(h=n[v])&&void 0!==h?h:null)===g)return o[a]=null!==(p=u[a])&&void 0!==p?p:null,o;i=!0;let y=null===g?null:s(f,g,a);return o[a]=null!=y?y:null,n&&(n[v]=g),o},{});if(!i){let t=Object.keys(e),r=Object.keys(null!=u?u:{});i=t.length!==r.length||t.some(e=>!r.includes(e))}return{state:o,hasChanged:i}}function v(e,t){return Object.fromEntries(Object.keys(e).map(r=>{var l,n;return[r,null!==(n=null!==(l=e[r])&&void 0!==l?l:t[r])&&void 0!==n?n:null]}))}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{parse:r=e=>e,serialize:s,eq:i,defaultValue:o,...a}=t,[{[e]:c},f]=function(e){var t,r,s;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,u.useId)(),a=(0,n.uZ)(),{history:c="replace",scroll:f=null!==(t=null==a?void 0:a.scroll)&&void 0!==t&&t,shallow:m=null===(r=null==a?void 0:a.shallow)||void 0===r||r,throttleMs:g=l.Vv.timeMs,limitUrlUpdates:y=null==a?void 0:a.limitUrlUpdates,clearOnDefault:q=null===(s=null==a?void 0:a.clearOnDefault)||void 0===s||s,startTransition:b,urlKeys:O=h}=i,w=Object.keys(e).join(","),S=(0,u.useMemo)(()=>Object.fromEntries(Object.keys(e).map(e=>{var t;return[e,null!==(t=O[e])&&void 0!==t?t:e]})),[w,JSON.stringify(O)]),M=(0,n.V7)(Object.values(S)),j=M.searchParams,z=(0,u.useRef)({}),k=(0,u.useMemo)(()=>Object.fromEntries(Object.keys(e).map(t=>{var r;return[t,null!==(r=e[t].defaultValue)&&void 0!==r?r:null]})),[Object.values(e).map(e=>{let{defaultValue:t}=e;return t}).join(",")]),U=l.ex.useQueuedQueries(Object.values(S)),[A,Q]=(0,u.useState)(()=>p(e,O,null!=j?j:new URLSearchParams,U).state),R=(0,u.useRef)(A);if((0,n.Yz)("[nuq+ %s `%s`] render - state: %O, iSP: %s",o,w,A,j),Object.keys(z.current).join("&")!==Object.values(S).join("&")){let{state:t,hasChanged:r}=p(e,O,j,U,z.current,R.current);r&&((0,n.Yz)("[nuq+ %s `%s`] State changed: %O",o,w,{state:t,initialSearchParams:j,queuedQueries:U,queryRef:z.current,stateRef:R.current}),R.current=t,Q(t)),z.current=Object.fromEntries(Object.values(S).map(e=>{var t;return[e,null!==(t=null==j?void 0:j.get(e))&&void 0!==t?t:null]}))}(0,u.useEffect)(()=>{let{state:t,hasChanged:r}=p(e,O,j,U,z.current,R.current);r&&((0,n.Yz)("[nuq+ %s `%s`] State changed: %O",o,w,{state:t,initialSearchParams:j,queuedQueries:U,queryRef:z.current,stateRef:R.current}),R.current=t,Q(t))},[Object.values(S).map(e=>"".concat(e,"=").concat(null==j?void 0:j.get(e))).join("&"),JSON.stringify(U)]),(0,u.useEffect)(()=>{let t=Object.keys(e).reduce((t,r)=>(t[r]=t=>{var l,u;let{state:s,query:i}=t,{defaultValue:a}=e[r],c=S[r];R.current={...R.current,[r]:null!==(l=null!=s?s:a)&&void 0!==l?l:null},z.current[c]=i,(0,n.Yz)("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). Resolved: %O",o,w,c,s,a,R.current),u=R.current,(0,n.Yz)("[nuq+ %s `%s`] updateInternalState %O",o,w,u),R.current=u,Q(u)},t),{});for(let r of Object.keys(e)){let e=S[r];(0,n.Yz)("[nuq+ %s `%s`] Subscribing to sync for `%s`",o,e,w),d.on(e,t[r])}return()=>{for(let r of Object.keys(e)){let e=S[r];(0,n.Yz)("[nuq+ %s `%s`] Unsubscribing to sync for `%s`",o,e,w),d.off(e,t[r])}}},[w,S]);let C=(0,u.useCallback)(function(t){var r,u,s,i,a,h,p,O,j,z,U,A,Q,C,E,Y,x,V,N,P,I,F,L,T,_,D,J;let $;let B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Z=Object.fromEntries(Object.keys(e).map(e=>[e,null])),H="function"==typeof t?null!==(r=t(v(R.current,k)))&&void 0!==r?r:Z:null!=t?t:Z;(0,n.Yz)("[nuq+ %s `%s`] setState: %O",o,w,H);let G=0,K=[];for(let[t,r]of Object.entries(H)){let n=e[t],o=S[t];if(!n)continue;(null!==(a=null!==(i=B.clearOnDefault)&&void 0!==i?i:n.clearOnDefault)&&void 0!==a?a:q)&&null!==r&&void 0!==n.defaultValue&&(null!==(h=n.eq)&&void 0!==h?h:(e,t)=>e===t)(r,n.defaultValue)&&(r=null);let v=null===r?null:(null!==(p=n.serialize)&&void 0!==p?p:String)(r);d.emit(o,{state:r,query:v});let w={key:o,query:v,options:{history:null!==(j=null!==(O=B.history)&&void 0!==O?O:n.history)&&void 0!==j?j:c,shallow:null!==(U=null!==(z=B.shallow)&&void 0!==z?z:n.shallow)&&void 0!==U?U:m,scroll:null!==(Q=null!==(A=B.scroll)&&void 0!==A?A:n.scroll)&&void 0!==Q?Q:f,startTransition:null!==(E=null!==(C=B.startTransition)&&void 0!==C?C:n.startTransition)&&void 0!==E?E:b}};if((null==B?void 0:null===(u=B.limitUrlUpdates)||void 0===u?void 0:u.method)==="debounce"||(null==y?void 0:y.method)==="debounce"||(null===(s=n.limitUrlUpdates)||void 0===s?void 0:s.method)==="debounce"){let e=null!==(P=null!==(N=null!==(V=null==B?void 0:null===(Y=B.limitUrlUpdates)||void 0===Y?void 0:Y.timeMs)&&void 0!==V?V:null==y?void 0:y.timeMs)&&void 0!==N?N:null===(x=n.limitUrlUpdates)||void 0===x?void 0:x.timeMs)&&void 0!==P?P:l.Vv.timeMs,t=l.ex.push(w,e,M);G<e&&($=t,G=e)}else{let e=null!==(J=null!==(D=null!==(_=null!==(T=null!==(L=null==B?void 0:null===(I=B.limitUrlUpdates)||void 0===I?void 0:I.timeMs)&&void 0!==L?L:null==n?void 0:null===(F=n.limitUrlUpdates)||void 0===F?void 0:F.timeMs)&&void 0!==T?T:null==y?void 0:y.timeMs)&&void 0!==_?_:B.throttleMs)&&void 0!==D?D:n.throttleMs)&&void 0!==J?J:g;K.push(l.ex.abort(o)),l.V.push(w,e)}}let W=K.reduce((e,t)=>t(e),l.V.flush(M));return null!=$?$:W},[w,c,m,f,g,null==y?void 0:y.method,null==y?void 0:y.timeMs,b,S,M.updateUrl,M.getSearchParamsSnapshot,M.rateLimitFactor,k]);return[(0,u.useMemo)(()=>v(A,k),[A,k]),C]}({[e]:{parse:r,serialize:s,eq:i,defaultValue:o}},a);return[c,(0,u.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(r=>({[e]:"function"==typeof t?t(r[e]):t}),r)},[e,f])]}},22168:(e,t,r)=>{r.d(t,{Hx:()=>d,OB:()=>a,R8:()=>s,V7:()=>h,Yz:()=>u,uZ:()=>p,z3:()=>o});var l=r(12115);let n=function(){try{let e="nuqs-localStorage-test";if("undefined"==typeof localStorage)return!1;localStorage.setItem(e,e);let t=localStorage.getItem(e)===e;return localStorage.removeItem(e),t&&(localStorage.getItem("debug")||"").includes("nuqs")}catch{return!1}}();function u(e,...t){if(!n)return;let r=function(e,...t){return e.replace(/%[sfdO]/g,e=>{let r=t.shift();return"%O"===e&&r?JSON.stringify(r).replace(/"([^"]+)":/g,"$1:"):String(r)})}(e,...t);performance.mark(r);try{console.log(e,...t)}catch{console.log(r)}}function s(e,...t){n&&console.warn(e,...t)}let i={303:"Multiple adapter contexts detected. This might happen in monorepos.",404:"nuqs requires an adapter to work with your framework.",409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.",414:"Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function o(e){return`[nuqs] ${i[e]}
  See https://err.47ng.com/NUQS-${e}`}function a(e){if(0===e.size)return"";let t=[];for(let[r,l]of e.entries()){let e=r.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");t.push(`${e}=${l.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/[\x00-\x1F]/g,e=>encodeURIComponent(e))}`)}return"?"+t.join("&")}let c=(0,l.createContext)({useAdapter(){throw Error(o(404))}});function d(e){return({children:t,defaultOptions:r,...n})=>(0,l.createElement)(c.Provider,{...n,value:{useAdapter:e,defaultOptions:r}},t)}function h(e){let t=(0,l.useContext)(c);if(!("useAdapter"in t))throw Error(o(404));return t.useAdapter(e)}c.displayName="NuqsAdapterContext",n&&"undefined"!=typeof window&&(window.__NuqsAdapterContext&&window.__NuqsAdapterContext!==c&&console.error(o(303)),window.__NuqsAdapterContext=c);let p=()=>(0,l.useContext)(c).defaultOptions}}]);