"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4311],{34477:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return a.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return o.findSourceMapURL}});let a=t(53806),o=t(31818),n=t(34979).createServerReference},35695:(e,r,t)=>{var a=t(18999);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},49026:(e,r,t)=>{t.d(r,{Fc:()=>d,TN:()=>c,XL:()=>l,ju:()=>i});var a=t(95155),o=t(12115),n=t(74466),s=t(53999);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-3 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-card text-foreground",destructive:"border-destructive/50 bg-card text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-green-500/50 bg-green-50 text-green-700 dark:border-green-500 dark:bg-green-950 dark:text-green-300 [&>svg]:text-green-600 dark:[&>svg]:text-green-400"}},defaultVariants:{variant:"default"}}),d=o.forwardRef((e,r)=>{let{className:t,variant:o,...n}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:(0,s.cn)(i({variant:o}),t),...n})});d.displayName="Alert";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("h5",{ref:r,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",t),...o})});l.displayName="AlertTitle";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",t),...o})});c.displayName="AlertDescription"},50883:(e,r,t)=>{t.d(r,{E6:()=>o,hs:()=>n,tY:()=>a});let a=[{label:"37\xb047'33.4\"N 122\xb024'18.6\"W",href:"https://maps.app.goo.gl/MnpbPDEHxoDydc9M9"},{label:"(269) 682-1402",href:"https://joyco.studio/showcase"},{label:"Instagram",href:"https://www.instagram.com/joyco.studio/"}],o="Default Title",n={red:"#ef4444",blue:"#3b82f6",green:"#22c55e",yellow:"#eab308",orange:"#f97316",purple:"#a855f7",pink:"#ec4899",black:"#000000",white:"#ffffff",gray:"#6b7280",grey:"#6b7280",brown:"#92400e",navy:"#1e3a8a",teal:"#14b8a6",cyan:"#06b6d4",indigo:"#6366f1",violet:"#8b5cf6",lime:"#84cc16",emerald:"#10b981",rose:"#f43f5e",fuchsia:"#d946ef",slate:"#64748b",neutral:"#737373",stone:"#78716c",zinc:"#71717a","light-blue":"#38bdf8","dark-blue":"#1e40af","light-green":"#4ade80","dark-green":"#232E23","light-gray":"#d1d5db","dark-gray":"#374151","light-grey":"#d1d5db","dark-grey":"#374151","dark-brown":"#6b4a1b",beige:"#f5f5dc",maroon:"#800000",olive:"#808000",aqua:"#00ffff",silver:"#c0c0c0",gold:"#ffd700",coral:"#ff7f50",salmon:"#fa8072",khaki:"#f0e68c",sand:"#e7d3b7",plum:"#dda0dd",tan:"#d2b48c",crimson:"#dc143c",turquoise:"#40e0d0",lavender:"#e6e6fa",ivory:"#fffff0",mint:"#98fb98",peach:"#ffcba4",pistachio:"#93c572",cream:"#edd0ae","army-green":"#4b5320","navy-blue":"#000080",wood:"#8d6e63"}},53999:(e,r,t)=>{t.d(r,{cO:()=>i,cn:()=>s,jo:()=>d});var a=t(52596),o=t(39688),n=t(50883);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,a.$)(r))}function i(e,r){let t=null==r?void 0:r.toString(),a="".concat(t.length?"?":"").concat(t);return"".concat(e).concat(a)}function d(e){if(!e)return"#000000";let r=e.toLowerCase();if(n.hs[r])return n.hs[r];for(let[e,t]of Object.entries(n.hs))if(r.includes(e)||e.includes(r))return t;return"#666666"}},72797:(e,r,t)=>{t.d(r,{b:()=>d});var a=t(12115);t(47650);var o=t(66634),n=t(95155),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,o.TL)(`Primitive.${r}`),s=a.forwardRef((e,a)=>{let{asChild:o,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o?t:r,{...s,ref:a})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),i=a.forwardRef((e,r)=>(0,n.jsx)(s.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var d=i},82714:(e,r,t)=>{t.d(r,{J:()=>l});var a=t(95155),o=t(12115),n=t(72797),s=t(74466),i=t(53999);let d=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)(n.b,{ref:r,className:(0,i.cn)(d(),t),...o})});l.displayName=n.b.displayName},88482:(e,r,t)=>{t.d(r,{BT:()=>l,Wu:()=>c,ZB:()=>d,Zp:()=>s,aR:()=>i});var a=t(95155),o=t(12115),n=t(53999);let s=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-md bg-card text-card-foreground",t),...o})});s.displayName="Card";let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-4",t),...o})});i.displayName="CardHeader";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold text-lg leading-none tracking-tight",t),...o})});d.displayName="CardTitle";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...o})});l.displayName="CardDescription";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-4 pt-0",t),...o})});c.displayName="CardContent",o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...o})}).displayName="CardFooter"},89852:(e,r,t)=>{t.d(r,{j:()=>s,p:()=>i});var a=t(95155),o=t(12115),n=t(53999);let s=(0,t(74466).F)("flex w-full rounded-full transition-[background-color,box-shadow] backdrop-blur-sm duration-200 ease-out bg-primary/20 shadow-sm ring-1 ring-transparent focus-visible:bg-primary/20 focus-visible:ring-1 focus-visible:ring-primary/40 focus-visible:ring-offset-4 focus-visible:ring-offset-black/10 disabled:cursor-not-allowed disabled:opacity-50 md:text-base text-white border-2 border-white/50 h-11 !text-base placeholder:text-white/80 focus:outline-none px-4"),i=o.forwardRef((e,r)=>{let{className:t,type:o,...s}=e;return(0,a.jsx)("input",{type:o,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-white px-3 py-1 text-base transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","aria-[invalid=true]:border-red-500 aria-[invalid=true]:focus-visible:!ring-red-500",t),ref:r,...s})});i.displayName="Input"},94311:(e,r,t)=>{t.d(r,{default:()=>b});var a=t(95155),o=t(12115),n=t(35695),s=t(97168),i=t(89852),d=t(82714),l=t(88482),c=t(49026),u=t(34477);let f=(0,u.createServerReference)("6031f27b758a14bb4f1c3504410a6f98776f2a9fb8",u.callServer,void 0,u.findSourceMapURL,"updatePalletZone"),g=(0,u.createServerReference)("40a444c12121f7044740951b7079ed317801357a48",u.callServer,void 0,u.findSourceMapURL,"createPalletZone"),p=new Map;async function m(e){let r=e.trim().replace(/\s+/g," ");if(p.has(r))return console.log("\uD83D\uDCCD Using cached geocode result for:",r),p.get(r);try{var t,a;console.log("\uD83C\uDF0D Geocoding address:",r);let e=await fetch("https://nominatim.openstreetmap.org/search?format=json&"+"q=".concat(encodeURIComponent(r),"&")+"limit=1&addressdetails=1&countrycodes=se,no,dk,fi,fr,de,gb,es,it&accept-language=en");if(!e.ok)throw Error("Geocoding API error: ".concat(e.status));let o=await e.json();if(!o||0===o.length)return{error:"NO_RESULTS",message:"No coordinates found for this address"};let n=o[0],s={lat:parseFloat(n.lat),lon:parseFloat(n.lon),display_name:n.display_name,address:n.address?{house_number:n.address.house_number,road:n.address.road,city:n.address.city||n.address.town||n.address.village,postcode:n.address.postcode,country:n.address.country,country_code:null===(t=n.address.country_code)||void 0===t?void 0:t.toUpperCase()}:void 0};return p.set(r,s),console.log("✅ Geocoded successfully:",{address:r,lat:s.lat,lon:s.lon,city:null===(a=s.address)||void 0===a?void 0:a.city}),s}catch(e){return console.error("❌ Geocoding error:",e),{error:"GEOCODING_FAILED",message:"Failed to geocode address: ".concat(e instanceof Error?e.message:"Unknown error")}}}async function v(e){if(!e.city||!e.country)return{error:"MISSING_REQUIRED_FIELDS",message:"City and country are required for geocoding"};let r=[];e.street&&r.push(e.street),e.postcode&&r.push(e.postcode),r.push(e.city),r.push(e.country);let t=r.join(", ");return await m(t)}function b(e){let{zone:r}=e,[t,u]=(0,o.useState)({name:(null==r?void 0:r.name)||"",radius_km:(null==r?void 0:r.radius_km)||500,center_lat:(null==r?void 0:r.center_lat)||0,center_lon:(null==r?void 0:r.center_lon)||0,zone_type:(null==r?void 0:r.zone_type)||"delivery"}),[p,b]=(0,o.useState)(""),[h,y]=(0,o.useState)({street:"",postcode:"",city:"",country:""}),[x,j]=(0,o.useState)(""),[w,k]=(0,o.useState)(!1),[N,_]=(0,o.useState)(!1),C=(0,n.useRouter)(),S=async e=>{e.preventDefault(),k(!0),j("");try{r?await f(r.id,t):await g(t),C.push("/admin/zones")}catch(e){j(e instanceof Error?e.message:"An error occurred")}finally{k(!1)}},R=(e,r)=>{u(t=>({...t,[e]:r}))},F=async()=>{if(!p.trim()){j("Please enter an address to geocode");return}_(!0),j("");try{let e=await m(p.trim());"error"in e?j("Geocoding failed: ".concat(e.message)):(u(r=>({...r,center_lat:e.lat,center_lon:e.lon})),j(""),console.log("✅ Coordinates updated:",e.lat,e.lon))}catch(e){j("Geocoding error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{_(!1)}},P=async()=>{if(!h.city.trim()||!h.country.trim()){j("City and country are required for geocoding");return}_(!0),j("");try{let e=await v(h);"error"in e?j("Geocoding failed: ".concat(e.message)):(u(r=>({...r,center_lat:e.lat,center_lon:e.lon})),j(""),console.log("✅ Coordinates updated:",e.lat,e.lon))}catch(e){j("Geocoding error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{_(!1)}};return(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:r?"Edit Zone":"Add Zone"}),(0,a.jsx)(l.BT,{children:r?"Update zone configuration":"Create a new delivery zone"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[x&&(0,a.jsx)(c.Fc,{variant:"destructive",children:(0,a.jsx)(c.TN,{children:x})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"name",children:"Zone Name *"}),(0,a.jsx)(i.p,{id:"name",value:t.name,onChange:e=>R("name",e.target.value),placeholder:"B\xe9ziers 500 km",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"zone_type",children:"Zone Type *"}),(0,a.jsxs)("select",{id:"zone_type",value:t.zone_type,onChange:e=>R("zone_type",e.target.value),className:"flex h-10 w-full rounded-md border border-input bg-white px-3 py-1 text-base transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm aria-[invalid=true]:border-red-500 aria-[invalid=true]:focus-visible:!ring-red-500",required:!0,children:[(0,a.jsx)("option",{value:"delivery",children:"Delivery Zone"}),(0,a.jsx)("option",{value:"pickup",children:"Pickup Zone"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"address",children:"Center Address (for automatic coordinates)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.p,{id:"address",value:p,onChange:e=>b(e.target.value),placeholder:"Stockholm, Sweden or Grevgatan 49, 11458 Stockholm",className:"flex-1"}),(0,a.jsx)(s.$,{type:"button",variant:"outline",onClick:F,disabled:N||!p.trim(),children:N?"Getting...":"Get Coordinates"})]})]}),(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"OR use separate fields below"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"street",children:"Street Address (optional)"}),(0,a.jsx)(i.p,{id:"street",value:h.street,onChange:e=>y(r=>({...r,street:e.target.value})),placeholder:"Grevgatan 49"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"postcode",children:"Postcode (optional)"}),(0,a.jsx)(i.p,{id:"postcode",value:h.postcode,onChange:e=>y(r=>({...r,postcode:e.target.value})),placeholder:"11458"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"city",children:"City *"}),(0,a.jsx)(i.p,{id:"city",value:h.city,onChange:e=>y(r=>({...r,city:e.target.value})),placeholder:"Stockholm",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"country",children:"Country *"}),(0,a.jsx)(i.p,{id:"country",value:h.country,onChange:e=>y(r=>({...r,country:e.target.value})),placeholder:"Sweden",required:!0})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(s.$,{type:"button",variant:"outline",onClick:P,disabled:N||!h.city.trim()||!h.country.trim(),children:N?"Getting...":"Get Coordinates from Fields"})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Enter city and country (required) to automatically get coordinates, or manually enter them below."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"center_lat",children:"Center Latitude *"}),(0,a.jsx)(i.p,{id:"center_lat",type:"number",step:"0.0001",value:t.center_lat,onChange:e=>R("center_lat",parseFloat(e.target.value)||0),placeholder:"59.3293",required:!0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Auto-filled when using address above"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"center_lon",children:"Center Longitude *"}),(0,a.jsx)(i.p,{id:"center_lon",type:"number",step:"0.0001",value:t.center_lon,onChange:e=>R("center_lon",parseFloat(e.target.value)||0),placeholder:"18.0686",required:!0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Auto-filled when using address above"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"radius_km",children:"Radius (km) *"}),(0,a.jsx)(i.p,{id:"radius_km",type:"number",step:"1",value:t.radius_km,onChange:e=>R("radius_km",parseInt(e.target.value)||0),placeholder:"50",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>C.back(),children:"Cancel"}),(0,a.jsx)(s.$,{type:"submit",disabled:w,children:w?"Saving...":r?"Update Zone":"Create Zone"})]})]})})]})}},97168:(e,r,t)=>{t.d(r,{$:()=>l,r:()=>d});var a=t(95155),o=t(12115),n=t(66634),s=t(74466),i=t(53999);let d=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-colors-and-shadows duration-300 ease-out focus-visible:outline-none focus-visible:border-border/15 focus-visible:ring-1 focus-visible:ring-primary/70 focus-visible:ring-offset-4 focus-visible:ring-offset-foreground/20 focus-visible:shadow-button-hover disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-6 [&_svg]:shrink-0 disabled:cursor-not-allowed",{variants:{variant:{default:"border border-border/50 hover:border-border/15 bg-primary/20 focus-visible:bg-primary/30 hover:bg-primary/30 backdrop-blur-sm text-primary ring-1 ring-offset-primary/10 ring-border/10 ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-background/10 backdrop-blur-lg text-foreground hover:bg-background/20",ghost:"font-medium text-foreground/50 hover:bg-accent hover:text-foreground/70 dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",iconButton:"border border-border/50 hover:border-border/15 bg-primary disabled:bg-primary/40 hover:bg-primary backdrop-blur-sm disabled:text-primary-foreground/50 text-primary-foreground ring-1 ring-offset-transparent ring-transparent ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover"},size:{sm:"h-8 px-3 text-xs",default:"h-9 px-4 py-2",lg:"h-10 px-8",icon:"size-9","icon-lg":"size-10","icon-xl":"size-11"},shine:{true:"relative overflow-hidden after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-white/20 after:to-transparent after:animate-shine after:pointer-events-none"}},defaultVariants:{variant:"default",size:"default",shine:!1}}),l=o.forwardRef((e,r)=>{let{className:t,variant:o,size:s,asChild:l=!1,shine:c,...u}=e,f=l?n.DX:"button";return(0,a.jsx)(f,{className:(0,i.cn)(d({variant:o,size:s,className:t,shine:c})),ref:r,...u})});l.displayName="Button"}}]);