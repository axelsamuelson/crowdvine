(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4396],{35695:(e,s,a)=>{"use strict";var t=a(18999);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},59898:(e,s,a)=>{Promise.resolve().then(a.bind(a,75645))},75645:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(95155),r=a(12115),l=a(35695),n=a(6874),i=a.n(n);function d(){let[e,s]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),x=(0,l.useSearchParams)();return((0,r.useEffect)(()=>{let e=x.get("email"),a=x.get("reservationId"),t=x.get("trackingCode");if(!e||!a&&!t){c("Email och antingen reservations-ID eller tracking-kod kr\xe4vs f\xf6r att kolla status"),n(!1);return}(async()=>{try{let r=new URLSearchParams;r.append("email",e),t?r.append("trackingCode",t):a&&r.append("reservationId",a);let l=await fetch("/api/reservation-status?".concat(r.toString()));if(!l.ok){404===l.status?c("Reservationen hittades inte. Kontrollera att email och reservations-ID/tracking-kod \xe4r korrekt."):c("Ett fel uppstod n\xe4r reservationsstatus skulle h\xe4mtas.");return}let n=await l.json();s(n)}catch(e){c("Ett fel uppstod n\xe4r reservationsstatus skulle h\xe4mtas.")}finally{n(!1)}})()},[x]),a)?(0,t.jsx)("div",{className:"max-w-3xl mx-auto p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})}):d?(0,t.jsx)("div",{className:"max-w-3xl mx-auto p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Kunde inte hitta reservationen"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:d}),(0,t.jsx)(i(),{href:"/",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Tillbaka till startsidan"})]})}):e?(0,t.jsxs)("div",{className:"max-w-3xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reservationsstatus"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"Status f\xf6r din vinreservation"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Reservationsdetaljer"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Reservations-ID:"}),(0,t.jsx)("p",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:e.id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,t.jsx)("p",{children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"placed":return"bg-blue-100 text-blue-800";case"allocated":return"bg-yellow-100 text-yellow-800";case"charged":case"delivered":return"bg-green-100 text-green-800";case"shipped":return"bg-purple-100 text-purple-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:(e=>{switch(e){case"placed":return"Placerad";case"allocated":return"Allokerad till pall";case"charged":return"Debiterad";case"shipped":return"Skickad";case"delivered":return"Levererad";case"cancelled":return"Avbruten";default:return e}})(e.status)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Datum:"}),(0,t.jsx)("p",{children:new Date(e.created_at).toLocaleDateString("sv-SE")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Kund:"}),(0,t.jsx)("p",{children:e.customer_name})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Best\xe4llda viner"}),(0,t.jsx)("div",{className:"space-y-3",children:e.items.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded border",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[e.wine_name," ",e.vintage]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Antal: ",e.quantity," st"]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Prisband: ",e.price_band]})})]},s))})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Leveransadress"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:e.address.street}),(0,t.jsxs)("p",{children:[e.address.postcode," ",e.address.city]}),(0,t.jsx)("p",{children:e.address.country_code})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Statusinformation"}),(0,t.jsxs)("div",{className:"space-y-4",children:["placed"===e.status&&(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center mr-3 mt-0.5",children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:"1"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:"Reservation placerad"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Din reservation har mottagits och v\xe4ntar p\xe5 att matchas med andra kunder i samma zon."})]})]}),"allocated"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-green-600 rounded-full flex items-center justify-center mr-3 mt-0.5",children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:"âœ“"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:"Allokerad till pall"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Din reservation har matchats med andra kunder och allokerats till en pall."})]})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-yellow-600 rounded-full flex items-center justify-center mr-3 mt-0.5",children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:"2"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:"Betalning kommer snart"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Vi kommer att debitera din sparade betalningsmetod n\xe4r pallen \xe4r redo att skickas."})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)(i(),{href:"/",className:"flex-1 px-6 py-3 bg-gray-600 text-white text-center rounded-lg hover:bg-gray-700 transition-colors",children:"Tillbaka till startsidan"}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 px-6 py-3 bg-blue-600 text-white text-center rounded-lg hover:bg-blue-700 transition-colors",children:"Uppdatera status"})]})]}):(0,t.jsx)("div",{className:"max-w-3xl mx-auto p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Reservationen hittades inte"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Kontrollera att email och reservations-ID \xe4r korrekt."}),(0,t.jsx)(i(),{href:"/",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Tillbaka till startsidan"})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[6874,8441,1684,7358],()=>s(59898)),_N_E=e.O()}]);