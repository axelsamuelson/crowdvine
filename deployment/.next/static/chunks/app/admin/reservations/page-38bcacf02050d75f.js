(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2072],{50883:(e,r,t)=>{"use strict";t.d(r,{E6:()=>a,hs:()=>n,tY:()=>s});let s=[{label:"37\xb047'33.4\"N 122\xb024'18.6\"W",href:"https://maps.app.goo.gl/MnpbPDEHxoDydc9M9"},{label:"(269) 682-1402",href:"https://joyco.studio/showcase"},{label:"Instagram",href:"https://www.instagram.com/joyco.studio/"}],a="Default Title",n={red:"#ef4444",blue:"#3b82f6",green:"#22c55e",yellow:"#eab308",orange:"#f97316",purple:"#a855f7",pink:"#ec4899",black:"#000000",white:"#ffffff",gray:"#6b7280",grey:"#6b7280",brown:"#92400e",navy:"#1e3a8a",teal:"#14b8a6",cyan:"#06b6d4",indigo:"#6366f1",violet:"#8b5cf6",lime:"#84cc16",emerald:"#10b981",rose:"#f43f5e",fuchsia:"#d946ef",slate:"#64748b",neutral:"#737373",stone:"#78716c",zinc:"#71717a","light-blue":"#38bdf8","dark-blue":"#1e40af","light-green":"#4ade80","dark-green":"#232E23","light-gray":"#d1d5db","dark-gray":"#374151","light-grey":"#d1d5db","dark-grey":"#374151","dark-brown":"#6b4a1b",beige:"#f5f5dc",maroon:"#800000",olive:"#808000",aqua:"#00ffff",silver:"#c0c0c0",gold:"#ffd700",coral:"#ff7f50",salmon:"#fa8072",khaki:"#f0e68c",sand:"#e7d3b7",plum:"#dda0dd",tan:"#d2b48c",crimson:"#dc143c",turquoise:"#40e0d0",lavender:"#e6e6fa",ivory:"#fffff0",mint:"#98fb98",peach:"#ffcba4",pistachio:"#93c572",cream:"#edd0ae","army-green":"#4b5320","navy-blue":"#000080",wood:"#8d6e63"}},53999:(e,r,t)=>{"use strict";t.d(r,{cO:()=>o,cn:()=>i,jo:()=>l});var s=t(52596),a=t(39688),n=t(50883);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}function o(e,r){let t=null==r?void 0:r.toString(),s="".concat(t.length?"?":"").concat(t);return"".concat(e).concat(s)}function l(e){if(!e)return"#000000";let r=e.toLowerCase();if(n.hs[r])return n.hs[r];for(let[e,t]of Object.entries(n.hs))if(r.includes(e)||e.includes(r))return t;return"#666666"}},60044:(e,r,t)=>{Promise.resolve().then(t.bind(t,61085))},61085:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var s=t(95155),a=t(12115),n=t(88482),i=t(88145),o=t(97168),l=t(95139),d=t(62525),c=t(47924),u=t(91788),f=t(5623),m=t(69074),x=t(40646),h=t(14186),g=t(1482),v=t(92657),b=t(13717);function p(){let[e,r]=(0,a.useState)([]),[t,p]=(0,a.useState)(!0),[j,y]=(0,a.useState)([]),[N,w]=(0,a.useState)("");(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{var e;console.log("Fetching reservations...");let t=await fetch("/api/admin/reservations");if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();console.log("Fetched reservations:",(null===(e=s.reservations)||void 0===e?void 0:e.length)||0),r(s.reservations||[])}catch(e){console.error("Failed to fetch reservations:",e),alert("Failed to fetch reservations. Please refresh the page.")}finally{p(!1)}},C=(e,r)=>{r?y(r=>[...r,e]):y(r=>r.filter(r=>r!==e))},z=async()=>{if(0!==j.length&&confirm("Are you sure you want to delete ".concat(j.length," reservation(s)? This will also delete all associated bookings and reservation items. This action cannot be undone.")))try{console.log("Deleting reservations:",j);let e=await fetch("/api/admin/reservations",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({reservationIds:j})}),r=await e.json();if(console.log("Delete response:",r),e.ok){y([]),p(!0),await k();let e=r.deletedCount||j.length,t=r.remainingCount||0;alert("Successfully deleted ".concat(e," reservation(s). ").concat(t," reservations remaining."))}else console.error("Delete failed:",r),alert("Failed to delete reservations: ".concat(r.error||"Unknown error"))}catch(e){console.error("Error deleting reservations:",e),alert("Failed to delete reservations")}},_=e.filter(e=>{var r,t,s;if(!N)return!0;let a=N.toLowerCase();return(null===(r=e.id)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(t=e.user_id)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(s=e.status)||void 0===s?void 0:s.toLowerCase().includes(a))});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reservations"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage customer order reservations (these block zone deletion)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[j.length>0&&(0,s.jsxs)(o.$,{variant:"destructive",size:"sm",onClick:z,children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Delete (",j.length,")"]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{p(!0),k()},children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(n.Zp,{children:(0,s.jsx)(n.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Reservations"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Order reservations"})]}),(0,s.jsx)(m.A,{className:"h-10 w-10 text-blue-600"})]})})}),(0,s.jsx)(n.Zp,{children:(0,s.jsx)(n.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Placed Orders"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"placed"===e.status).length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Confirmed orders"})]}),(0,s.jsx)(x.A,{className:"h-10 w-10 text-green-600"})]})})}),(0,s.jsx)(n.Zp,{children:(0,s.jsx)(n.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:e.filter(e=>"placed"!==e.status).length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting confirmation"})]}),(0,s.jsx)(h.A,{className:"h-10 w-10 text-orange-600"})]})})})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.ZB,{children:"All Reservations"}),(0,s.jsx)(n.BT,{children:"Complete list of all order reservations (these prevent zone deletion)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search reservations...",value:N,onChange:e=>w(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Filter"]})]})]})}),(0,s.jsx)(n.Wu,{children:t?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading reservations..."})]}):_&&_.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:(0,s.jsx)(l.S,{checked:j.length===_.length&&_.length>0,onCheckedChange:r=>{r?y(e.map(e=>e.id)):y([])}})}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:"Reservation ID"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:"Customer"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:"Status"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:"Delivery Zone"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:"Pickup Zone"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:"Date"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-sm text-gray-600",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:_.map(e=>{var r;return(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"p-3",children:(0,s.jsx)(l.S,{checked:j.includes(e.id),onCheckedChange:r=>C(e.id,r)})}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsxs)("div",{className:"font-mono text-sm text-gray-600",children:[null===(r=e.id)||void 0===r?void 0:r.substring(0,8),"..."]})}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.user_id?"User ".concat(e.user_id.substring(0,8),"..."):"Unknown"}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Customer"})]})}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsx)(i.E,{variant:"secondary",className:"placed"===e.status?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:e.status||"Unknown"})}),(0,s.jsx)("td",{className:"p-3 text-gray-900",children:e.delivery_zone_id?"Zone ".concat(e.delivery_zone_id):"None"}),(0,s.jsx)("td",{className:"p-3 text-gray-900",children:e.pickup_zone_id?"Zone ".concat(e.pickup_zone_id):"None"}),(0,s.jsx)("td",{className:"p-3 text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(o.$,{variant:"outline",size:"sm",className:"text-xs",children:[(0,s.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"View"]}),(0,s.jsxs)(o.$,{size:"sm",className:"text-xs",children:[(0,s.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"Edit"]})]})})]},e.id)})})]})}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(m.A,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:"No reservations found"}),(0,s.jsx)("p",{className:"text-gray-500",children:"When customers place orders, reservations will appear here."})]})})]})]})}},88145:(e,r,t)=>{"use strict";t.d(r,{E:()=>l});var s=t(95155);t(12115);var a=t(66634),n=t(74466),i=t(53999);let o=(0,n.F)("inline-flex uppercase font-semibold items-center justify-center rounded-md border px-2 py-0.5 text-xs w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground","outline-secondary":"text-base border border-foreground py-0.5 px-2.5 opacity-50"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,asChild:n=!1,...l}=e,d=n?a.DX:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(o({variant:t}),r),...l})}},88482:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o});var s=t(95155),a=t(12115),n=t(53999);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-md bg-card text-card-foreground",t),...a})});i.displayName="Card";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-4",t),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold text-lg leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-4 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},95139:(e,r,t)=>{"use strict";t.d(r,{S:()=>l});var s=t(95155),a=t(12115),n=t(9146),i=t(5196),o=t(53999);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.bL,{ref:r,className:(0,o.cn)("peer bg-background h-4 w-4 shrink-0 rounded-sm border border-primary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,s.jsx)(n.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})})});l.displayName=n.bL.displayName},97168:(e,r,t)=>{"use strict";t.d(r,{$:()=>d,r:()=>l});var s=t(95155),a=t(12115),n=t(66634),i=t(74466),o=t(53999);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-colors-and-shadows duration-300 ease-out focus-visible:outline-none focus-visible:border-border/15 focus-visible:ring-1 focus-visible:ring-primary/70 focus-visible:ring-offset-4 focus-visible:ring-offset-foreground/20 focus-visible:shadow-button-hover disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-6 [&_svg]:shrink-0 disabled:cursor-not-allowed",{variants:{variant:{default:"border border-border/50 hover:border-border/15 bg-primary/20 focus-visible:bg-primary/30 hover:bg-primary/30 backdrop-blur-sm text-primary ring-1 ring-offset-primary/10 ring-border/10 ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-background/10 backdrop-blur-lg text-foreground hover:bg-background/20",ghost:"font-medium text-foreground/50 hover:bg-accent hover:text-foreground/70 dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",iconButton:"border border-border/50 hover:border-border/15 bg-primary disabled:bg-primary/40 hover:bg-primary backdrop-blur-sm disabled:text-primary-foreground/50 text-primary-foreground ring-1 ring-offset-transparent ring-transparent ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover"},size:{sm:"h-8 px-3 text-xs",default:"h-9 px-4 py-2",lg:"h-10 px-8",icon:"size-9","icon-lg":"size-10","icon-xl":"size-11"},shine:{true:"relative overflow-hidden after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-white/20 after:to-transparent after:animate-shine after:pointer-events-none"}},defaultVariants:{variant:"default",size:"default",shine:!1}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:d=!1,shine:c,...u}=e,f=d?n.DX:"button";return(0,s.jsx)(f,{className:(0,o.cn)(l({variant:a,size:i,className:t,shine:c})),ref:r,...u})});d.displayName="Button"}},e=>{var r=r=>e(e.s=r);e.O(0,[4277,9146,4125,8441,1684,7358],()=>r(60044)),_N_E=e.O()}]);