(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2510],{11336:(e,r,t)=>{Promise.resolve().then(t.bind(t,51011))},26959:(e,r,t)=>{"use strict";t.d(r,{B:()=>o});var n=t(34477);let o=(0,n.createServerReference)("402eefbf27465ab7a9e2720f0501458518d9ba2628",n.callServer,void 0,n.findSourceMapURL,"addItem")},34477:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return n.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return o.findSourceMapURL}});let n=t(53806),o=t(31818),i=t(34979).createServerReference},50883:(e,r,t)=>{"use strict";t.d(r,{E6:()=>o,hs:()=>i,tY:()=>n});let n=[{label:"37\xb047'33.4\"N 122\xb024'18.6\"W",href:"https://maps.app.goo.gl/MnpbPDEHxoDydc9M9"},{label:"(269) 682-1402",href:"https://joyco.studio/showcase"},{label:"Instagram",href:"https://www.instagram.com/joyco.studio/"}],o="Default Title",i={red:"#ef4444",blue:"#3b82f6",green:"#22c55e",yellow:"#eab308",orange:"#f97316",purple:"#a855f7",pink:"#ec4899",black:"#000000",white:"#ffffff",gray:"#6b7280",grey:"#6b7280",brown:"#92400e",navy:"#1e3a8a",teal:"#14b8a6",cyan:"#06b6d4",indigo:"#6366f1",violet:"#8b5cf6",lime:"#84cc16",emerald:"#10b981",rose:"#f43f5e",fuchsia:"#d946ef",slate:"#64748b",neutral:"#737373",stone:"#78716c",zinc:"#71717a","light-blue":"#38bdf8","dark-blue":"#1e40af","light-green":"#4ade80","dark-green":"#232E23","light-gray":"#d1d5db","dark-gray":"#374151","light-grey":"#d1d5db","dark-grey":"#374151","dark-brown":"#6b4a1b",beige:"#f5f5dc",maroon:"#800000",olive:"#808000",aqua:"#00ffff",silver:"#c0c0c0",gold:"#ffd700",coral:"#ff7f50",salmon:"#fa8072",khaki:"#f0e68c",sand:"#e7d3b7",plum:"#dda0dd",tan:"#d2b48c",crimson:"#dc143c",turquoise:"#40e0d0",lavender:"#e6e6fa",ivory:"#fffff0",mint:"#98fb98",peach:"#ffcba4",pistachio:"#93c572",cream:"#edd0ae","army-green":"#4b5320","navy-blue":"#000080",wood:"#8d6e63"}},51011:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n=t(95155),o=t(97168),i=t(12115),a=t(26959);function l(){let[e,r]=(0,i.useState)(""),[t,l]=(0,i.useState)(""),s=async()=>{try{console.log("Getting wine ID...");let e=await fetch("/api/crowdvine/products"),t=await e.json();if(t.length>0){let e=t[0];l(e.id),r("Found wine ID: ".concat(e.id," (").concat(e.title,")"))}else r("No wines found")}catch(e){console.error("Error getting wine ID:",e),r("Error: ".concat(e))}},c=async()=>{if(!t){r("Please get a wine ID first");return}try{console.log("Testing shop addItem server action...");let e=t+"-default";console.log("Using variant ID:",e);let n=await (0,a.B)(e);console.log("Server action result:",n),r("Shop AddItem Test:\nVariant ID: ".concat(e,"\nResult: ").concat(JSON.stringify(n,null,2)))}catch(e){console.error("Shop addItem error:",e),r("Shop addItem error: ".concat(e))}},d=async()=>{if(!t){r("Please get a wine ID first");return}try{console.log("Testing direct API call...");let e=t+"-default";console.log("Using variant ID:",e);let n=await fetch("/api/crowdvine/cart",{method:"POST"}),o=await n.json();console.log("Cart created:",o);let i=await fetch("/api/crowdvine/cart/".concat(o.id,"/lines/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lines:[{merchandiseId:e,quantity:1}]})}),a=await i.json();console.log("Add result:",a),r("Direct API Test:\nVariant ID: ".concat(e,"\nCart: ").concat(JSON.stringify(o,null,2),"\nAdd: ").concat(JSON.stringify(a,null,2)))}catch(e){console.error("Direct API error:",e),r("Direct API error: ".concat(e))}},u=async()=>{try{console.log("Testing cookie comparison...");let e=document.cookie;console.log("Cookies before:",e);let n=t+"-default";console.log("Testing server action with variant ID:",n);let o=await (0,a.B)(n);console.log("Server action result:",o);let i=document.cookie;console.log("Cookies after server action:",i);let l=await fetch("/api/crowdvine/cart",{method:"POST"}),s=await l.json();console.log("Direct API cart:",s);let c=document.cookie;console.log("Cookies after direct API:",c),r("Cookie Comparison:\nBefore: ".concat(e,"\nAfter Server Action: ").concat(i,"\nAfter Direct API: ").concat(c,"\n\nServer Action Result: ").concat(JSON.stringify(o,null,2),"\nDirect API Result: ").concat(JSON.stringify(s,null,2)))}catch(e){console.error("Cookie comparison error:",e),r("Cookie comparison error: ".concat(e))}};return(0,n.jsxs)("div",{className:"container mx-auto p-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Shop Simulation Test Page"}),(0,n.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,n.jsx)(o.$,{onClick:s,variant:"outline",children:"Get Wine ID"}),(0,n.jsx)(o.$,{onClick:c,disabled:!t,children:"Test Shop AddItem Server Action"}),(0,n.jsx)(o.$,{onClick:d,disabled:!t,variant:"outline",children:"Test Direct API Call"}),(0,n.jsx)(o.$,{onClick:u,disabled:!t,variant:"outline",children:"Test Cookie Comparison"})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-gray-50",children:[(0,n.jsx)("h2",{className:"font-semibold mb-2",children:"Result:"}),(0,n.jsx)("pre",{className:"text-sm whitespace-pre-wrap",children:e})]}),(0,n.jsxs)("div",{className:"mt-4 p-4 border rounded",children:[(0,n.jsx)("h2",{className:"font-semibold mb-2",children:"Instructions:"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,n.jsx)("li",{children:'Click "Get Wine ID" to fetch a real wine ID'}),(0,n.jsx)("li",{children:'Click "Test Shop AddItem Server Action" to test the exact server action shop uses'}),(0,n.jsx)("li",{children:'Click "Test Direct API Call" to test the same flow with direct API calls'}),(0,n.jsx)("li",{children:'Click "Test Cookie Comparison" to compare cookie behavior between server action and direct API'}),(0,n.jsx)("li",{children:"Check browser console for detailed logs"}),(0,n.jsx)("li",{children:"Compare results to understand why server action fails but direct API works"})]})]})]})}},53999:(e,r,t)=>{"use strict";t.d(r,{cO:()=>l,cn:()=>a,jo:()=>s});var n=t(52596),o=t(39688),i=t(50883);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,n.$)(r))}function l(e,r){let t=null==r?void 0:r.toString(),n="".concat(t.length?"?":"").concat(t);return"".concat(e).concat(n)}function s(e){if(!e)return"#000000";let r=e.toLowerCase();if(i.hs[r])return i.hs[r];for(let[e,t]of Object.entries(i.hs))if(r.includes(e)||e.includes(r))return t;return"#666666"}},66634:(e,r,t)=>{"use strict";t.d(r,{DX:()=>l,TL:()=>a});var n=t(12115);function o(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}var i=t(95155);function a(e){let r=function(e){let r=n.forwardRef((e,r)=>{let{children:t,...i}=e;if(n.isValidElement(t)){var a;let e,l;let s=(a=t,(l=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(l=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),c=function(e,r){let t={...r};for(let n in r){let o=e[n],i=r[n];/^on[A-Z]/.test(n)?o&&i?t[n]=(...e)=>{let r=i(...e);return o(...e),r}:o&&(t[n]=o):"style"===n?t[n]={...o,...i}:"className"===n&&(t[n]=[o,i].filter(Boolean).join(" "))}return{...e,...t}}(i,t.props);return t.type!==n.Fragment&&(c.ref=r?function(...e){return r=>{let t=!1,n=e.map(e=>{let n=o(e,r);return t||"function"!=typeof n||(t=!0),n});if(t)return()=>{for(let r=0;r<n.length;r++){let t=n[r];"function"==typeof t?t():o(e[r],null)}}}}(r,s):s),n.cloneElement(t,c)}return n.Children.count(t)>1?n.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=n.forwardRef((e,t)=>{let{children:o,...a}=e,l=n.Children.toArray(o),s=l.find(c);if(s){let e=s.props.children,o=l.map(r=>r!==s?r:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(r,{...a,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,o):null})}return(0,i.jsx)(r,{...a,ref:t,children:o})});return t.displayName=`${e}.Slot`,t}var l=a("Slot"),s=Symbol("radix.slottable");function c(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===s}},74466:(e,r,t)=>{"use strict";t.d(r,{F:()=>a});var n=t(52596);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=n.$,a=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return i(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:a,defaultVariants:l}=r,s=Object.keys(a).map(e=>{let r=null==t?void 0:t[e],n=null==l?void 0:l[e];if(null===r)return null;let i=o(r)||o(n);return a[e][i]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return i(e,s,null==r?void 0:null===(n=r.compoundVariants)||void 0===n?void 0:n.reduce((e,r)=>{let{class:t,className:n,...o}=r;return Object.entries(o).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...c}[r]):({...l,...c})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},97168:(e,r,t)=>{"use strict";t.d(r,{$:()=>c,r:()=>s});var n=t(95155),o=t(12115),i=t(66634),a=t(74466),l=t(53999);let s=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-colors-and-shadows duration-300 ease-out focus-visible:outline-none focus-visible:border-border/15 focus-visible:ring-1 focus-visible:ring-primary/70 focus-visible:ring-offset-4 focus-visible:ring-offset-foreground/20 focus-visible:shadow-button-hover disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-6 [&_svg]:shrink-0 disabled:cursor-not-allowed",{variants:{variant:{default:"border border-border/50 hover:border-border/15 bg-primary/20 focus-visible:bg-primary/30 hover:bg-primary/30 backdrop-blur-sm text-primary ring-1 ring-offset-primary/10 ring-border/10 ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-background/10 backdrop-blur-lg text-foreground hover:bg-background/20",ghost:"font-medium text-foreground/50 hover:bg-accent hover:text-foreground/70 dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",iconButton:"border border-border/50 hover:border-border/15 bg-primary disabled:bg-primary/40 hover:bg-primary backdrop-blur-sm disabled:text-primary-foreground/50 text-primary-foreground ring-1 ring-offset-transparent ring-transparent ring-offset-2 hover:ring-primary/15 hover:ring-offset-4 hover:ring-offset-black/20 shadow-button hover:shadow-button-hover"},size:{sm:"h-8 px-3 text-xs",default:"h-9 px-4 py-2",lg:"h-10 px-8",icon:"size-9","icon-lg":"size-10","icon-xl":"size-11"},shine:{true:"relative overflow-hidden after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-white/20 after:to-transparent after:animate-shine after:pointer-events-none"}},defaultVariants:{variant:"default",size:"default",shine:!1}}),c=o.forwardRef((e,r)=>{let{className:t,variant:o,size:a,asChild:c=!1,shine:d,...u}=e,f=c?i.DX:"button";return(0,n.jsx)(f,{className:(0,l.cn)(s({variant:o,size:a,className:t,shine:d})),ref:r,...u})});c.displayName="Button"}},e=>{var r=r=>e(e.s=r);e.O(0,[4277,8441,1684,7358],()=>r(11336)),_N_E=e.O()}]);